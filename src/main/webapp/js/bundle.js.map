{"version":3,"sources":["app.js","layouts/header-index.js","layouts/main.js","layouts/nav.ctrl.js","layouts/sidebar.ctrl.js","services/api-interceptor.js","services/api.js","services/cart.js","services/categories.js","services/images.js","services/orders.js","services/storage.js","blocks/filter/postfix.js","components/cart/cart.ctrl.js","blocks/helper/func.js","components/category/category.ctrl.js","components/home/home.ctrl.js","components/order/order.ctrl.js","layouts/core/common.js","layouts/core/config.js","layouts/core/pagination.js","layouts/core/routes.js","layouts/core/spinner.js","blocks/directive/add-cart/add-cart.js","blocks/directive/image-slider/slider.js"],"names":["angular","module","config","localStorageServiceProvider","$anchorScrollProvider","ngDialogProvider","$httpProvider","setPrefix","setStorageType","setNotify","setDefaults","showClose","interceptors","push","disableAutoScrolling","defaults","useXDomain","headers","common","post","run","$rootScope","ENV","fullPath","path","apiUrl","HeaderIndexCtrl","$interval","$timeout","$scope","toggleSlide","nextIndex","vm","index","max","startInterval","interval","this","loading","selectSlide","cancel","$on","controller","$inject","MainCtrl","ngDialog","storage","showCallback","open","template","width","appendClassName","callbackModalCtrl","controllerAs","orders","sendForm","create","form","success","client","name","phone","address","dishes","status","send","categories","getArray","NavCtrl","SideBarCtrl","cart","calculateOrderPrice","result","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","dish","value","price","count","err","list","priceOrder","incCount","inc","decCount","dec","removeDish","remove","clearCart","clean","$watch","SideBarOrderCtrl","$state","forEach","quantity","dishId","id","$promise","go","factory","$q","request","url","indexOf","requestError","reject","responseError","response","api","baseUrl","$get","$http","get","data","delete","put","helpers","APP_EVENTS","increaseCount","product","search","searchByKey","products","decreaseCount","splice","length","pop","getAmountOfProducts","getListOfProducts","addCart","saveInStorage","f","apply","arguments","setObject","emit","$broadcast","editCart","add","service","amount","$resource","fetchAll","method","isArray","params","action","fetchDishes","images","localStorageService","set","key","defaultValue","JSON","stringify","getObject","parse","PostfixFilter","postfix","trim","filter","CartCtrl","$controller","calculateOrderInfo","extend","orderInfo","shapeArrayInRows","array","sizeColumn","i","slice","keys","Object","row","CategoryCtrl","spinner","pagination","$stateParams","activate","promises","getDishes","start","then","getMoreDishes","chunkDishes","showDishDetail","HomeCtrl","OrderSuccessCtrl","step","nextStep","$emit","constant","serverError","createPagination","entry","limit","cnf","page","total","calculateTotalPage","entries","nextPage","hasEnabled","hasPaginationEnabled","chunkEntries","Math","ceil","$stateProvider","$urlRouterProvider","state","views","@","templateUrl","resolve","appInit","header@index","nav@index","sidebar@index","content@index","marketing@index","footer@index","abstract","header@main","nav@main","sidebar@main","marketing@main","footer@main","content@main","otherwise","startLoading","promise","loadingSpinner","all","restrict","replace","directive","scope","link","element","bind","$apply","closeAll","imageSlider","click","clickImage","onClick","isCurrentIndex","prevSlide","nextSlide"],"mappings":"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","file":"bundle.js","sourcesContent":["(function() {\n  angular.module('app', [\n      /**\n       * Angular modules\n       */\n\n      'ngAnimate',\n      'ngResource',\n\n      /**\n       * 3rd Party modules\n       */\n\n      'ngDialog',\n      'LocalStorageModule',\n      'ui.router',\n      'ui.mask',\n      'templates',\n\n      /**\n       * Reusable blocks\n       */\n\n      'app.blocks',\n\n      /**\n       * Project modules\n       */\n\n      'app.core',\n      'app.layouts',\n      'app.ctrls',\n      'app.services',\n      'app.filters',\n    ])\n    .config((\n      localStorageServiceProvider,\n      $anchorScrollProvider,\n      ngDialogProvider,\n      $httpProvider\n    ) => {\n      localStorageServiceProvider\n        .setPrefix('YOKI')\n        .setStorageType('localStorage')\n        .setNotify(true, true);\n\n      ngDialogProvider.setDefaults({showClose: false});\n      $httpProvider.interceptors.push('apiInterceptor');\n      $anchorScrollProvider.disableAutoScrolling();\n\n      $httpProvider.defaults.useXDomain                         = true;\n      $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n      $httpProvider.defaults.headers.post['Content-Type']       = 'application/json';\n      $httpProvider.defaults.headers.post['Accept']             = 'application/json';\n    })\n    .run(($rootScope, ENV) => {\n      $rootScope.fullPath = (path) => {\n        return ENV.apiUrl + path;\n      }\n    })\n\n  angular.module('app.core', []);\n  angular.module('app.blocks', []);\n  angular.module('app.layouts', []);\n  angular.module('app.ctrls', []);\n  angular.module('app.services', []);\n  angular.module('app.filters', []);\n})();\n","(function() {\n  angular.module('app.layouts')\n    .controller('HeaderIndexCtrl', HeaderIndexCtrl)\n\n  HeaderIndexCtrl.$inject = [\n    '$interval',\n    '$timeout',\n    '$scope',\n  ];\n\n  function HeaderIndexCtrl(\n    $interval,\n    $timeout,\n    $scope\n  ) {\n    let vm = this;\n\n    vm.index   = 0;\n    vm.loading = true;\n    \n    let interval;\n    let max    = 2;\n\n    vm.selectSlide = (index) => {\n      if (interval) {\n        $interval.cancel(interval);\n      }\n\n      vm.index = index;\n      startInterval();\n    }\n\n    function toggleSlide() {\n      let nextIndex = vm.index + 1;\n\n      if (nextIndex > max) {\n        vm.index = 0;\n      } else {\n        vm.index++;\n      }\n    }\n\n    function startInterval() {\n      interval = $interval(toggleSlide, 5000);\n    }\n\n    $timeout(() => {\n      vm.loading = false;\n      startInterval();\n    }, 2500);\n\n    $scope.$on('$destroy', () => {\n      if (interval) {\n        $interval.cancel(interval);\n      }\n    });\n  }\n})();\n","(function() {\n  angular.module('app.ctrls')\n    .controller('MainCtrl', MainCtrl)\n\n  /**\n   * @ngdoc function\n   * @description Контроллер на уровне всего приложения\n   */\n\n  MainCtrl.$inject = [\n    '$rootScope',\n    'ngDialog',\n    'storage'\n  ];\n\n  function MainCtrl(\n    $rootScope,\n    ngDialog,\n    storage\n  ) {\n\n    $rootScope.categories   = storage.getArray('categories');\n    $rootScope.showCallback = showCallback;\n\n    //////////////\n\n    function showCallback() {\n      ngDialog.open({\n        template: 'html/modals/callback.html',\n        showClose: true,\n        width: \"25%\",\n        appendClassName: 'callback-modal',\n        controller: callbackModalCtrl,\n        controllerAs: 'vm'\n      });\n    }\n\n    callbackModalCtrl.$inject = [\n      'orders'\n    ];\n\n    function callbackModalCtrl(\n      orders\n    ) {\n      let vm = this;\n\n      vm.form = {\n        client: {\n          name: '',\n          phone: 0,\n          address: 'default'\n        },\n        dishes: [],\n        status: 'FRESH'\n      };\n\n      vm.success = false;\n      vm.send    = sendForm;\n\n      //////////////////\n\n      function sendForm() {\n        orders.create(vm.form, () => {\n          vm.success = true;\n        });\n      }\n    }\n  }\n})();\n","(function() {\n  angular.module('app.layouts')\n    .controller('NavCtrl', NavCtrl)\n\n  NavCtrl.$inject = [];\n\n  function NavCtrl() {\n    let vm = this;\n  }\n})();\n","(function() {\n  angular.module('app.layouts')\n    .controller('SideBarCtrl', SideBarCtrl)\n    .controller('SideBarOrderCtrl', SideBarOrderCtrl)\n\n  SideBarCtrl.$inject = [\n    '$scope',\n    'cart'\n  ];\n\n  function SideBarCtrl(\n    $scope,\n    cart\n  ) {\n    let vm = this;\n\n    vm.dishes     = cart.list();\n    vm.priceOrder = calculateOrderPrice();\n\n    vm.incCount = (dish) => {\n      cart.inc(dish);\n    }\n\n    vm.decCount = (dish) => {\n      cart.dec(dish);\n    }\n\n    vm.removeDish = (dish) => {\n      cart.remove(dish);\n    }\n\n    vm.clearCart = () => {\n      cart.clean();\n    }\n\n    $scope.$watch(function() {\n      return vm.dishes;\n    }, function() {\n      vm.priceOrder = calculateOrderPrice();\n    }, true);\n\n    // Вычисляет цену заказа\n    function calculateOrderPrice() {\n      let result = 0;\n\n      if (vm.dishes) {\n        for (let dish of vm.dishes) {\n          result += dish.price * dish.count;\n        }\n      }\n\n      return result;\n    }\n  }\n\n  SideBarOrderCtrl.$inject = [\n    'orders',\n    '$state',\n    'cart'\n  ];\n\n  function SideBarOrderCtrl(\n    orders,\n    $state,\n    cart\n  ) {\n    let vm = this;\n\n    let dishes = [];\n\n    cart.list().forEach((dish) => {\n      dishes.push({\n        quantity: dish.count,\n        dishId: dish.id\n      });\n    });\n\n    vm.form = {\n      client: {\n        name: '',\n        phone: 0,\n        address: ''\n      },\n      dishes: dishes,\n      status: 'FRESH'\n    };\n\n    vm.send = () => {\n      orders.create(vm.form).$promise.finally(() => {\n        cart.clean();\n        \n        $state.go('main.order-success', {\n          client: vm.form.client\n        });\n      });\n    }\n  }\n})();\n","(function() {\n    angular.module('app.services')\n        .factory('apiInterceptor', ($rootScope, $q, ENV) => {\n            return {\n                request: (config) => {\n                    // Если запрос идет не к html/, то добавляем base url\n                    if (config.url.indexOf('html/', 0) == -1) {\n                        config.url = ENV.apiUrl + config.url\n                    }\n\n                    return config;\n                },\n                requestError: (request) => {\n                    return $q.reject(request);\n                },\n                responseError: (response) => {\n                    return $q.reject(response);\n                }\n            };\n        })\n})();","(function() {\n    angular.module('app.services')\n        .factory('$api', api)\n\n    /**\n     * @ngdoc service\n     * @name $api\n     * @module app.services\n     *\n     * @description\n     * Простая обертка под сервисом $http\n     */\n\n    function api() {\n        this.baseUrl = '';\n        this.$get = ['$http', ($http) => {\n            return {\n                get(url) {\n                    return $http.get(this.baseUrl + url)\n                },\n                post(url, data) {\n                    return $http.post(this.baseUrl + url, data)\n                },\n                delete(url) {\n                    return $http.delete(this.baseUrl + url)\n                },\n                put(url, data) {\n                    return $http.put(this.baseUrl + url, data)\n                }\n            }\n        }];\n    }\n})();","(function() {\n  angular.module('app.services')\n    .factory('cart', cart)\n\n  cart.$inject = [\n    'storage',\n    'helpers',\n    'APP_EVENTS',\n    'common'\n  ];\n\n  function cart(\n    storage,\n    helpers,\n    APP_EVENTS,\n    common\n  ) {\n\n    let products = storage.getArray('cart');\n\n    let add    = saveInStorage(emit(addCart));\n    let inc    = saveInStorage(emit(increaseCount));\n    let dec    = saveInStorage(emit(decreaseCount));\n    let remove = saveInStorage(emit(removeDish));\n    let clean  = saveInStorage(emit(clearCart));\n\n    let service = {\n      add: add,\n      inc: inc,\n      dec: dec,\n      remove: remove,\n      clean: clean,\n      amount: getAmountOfProducts,\n      list: getListOfProducts,\n    };\n\n    return service;\n\n    /**\n     * Увеличивает кол-во у переданного продукта\n     * @param {Object} product\n     */\n\n    function increaseCount(product) {\n      let search = helpers.searchByKey(products, {id: product.id});\n      search.count++;\n    }\n\n    /**\n     * Уменьшает кол-во у переданного продукта\n     * @param {Object} product\n     */\n\n    function decreaseCount(product) {\n      let search = helpers.searchByKey(products, {id: product.id});\n      search.count--;\n\n      if (!search.count) {\n        products.splice(products.indexOf(search), 1)\n      }\n    }\n\n    /**\n     * Удаляет продукт из корзины\n     * @param {Object} product\n     */\n\n    function removeDish(product) {\n      let search = helpers.searchByKey(products, {id: product.id});\n      products.splice(products.indexOf(search), 1);\n    }\n\n    /**\n     * Чистит корзину\n     */\n\n    function clearCart() {\n      while (products.length) {\n        products.pop();\n      }\n    }\n\n    /**\n     * Возвращает общее кол-во товаров в корзине\n     * @returns {number}\n     */\n\n    function getAmountOfProducts() {\n      let result = 0;\n\n      if (products) {\n        products.forEach((product) => {\n          result += product.count;\n        });\n      }\n\n      return result;\n    }\n\n    function getListOfProducts() {\n      return products;\n    }\n\n    /**\n     * Добавление товара в корзину\n     * @param {Object} product\n     */\n\n    function addCart(product) {\n      // Пытаемся найти переданный товар в корзине\n      let search = helpers.searchByKey(products, {id: product.id});\n\n      // Если в корзине он уже есть, то увеличиваем кол-во\n      if (search) {\n        search.count++;\n      } else {\n        product.count = 1;\n        products.push(product);\n      }\n    }\n\n    function saveInStorage(f) {\n      return function() {\n        f.apply(this, arguments);\n        storage.setObject('cart', products);\n      }\n    }\n\n    function emit(f) {\n      return function() {\n        f.apply(this, arguments);\n        common.$broadcast(APP_EVENTS.editCart);\n      }\n    }\n  }\n})();\n","(function() {\n  angular.module('app.services')\n    .factory('categories', categories)\n\n  categories.$inject = [\n    '$resource'\n  ];\n\n  function categories($resource) {\n    return $resource('/category/:action/:id', {}, {\n      'fetchAll': {\n        method: 'GET',\n        isArray: true,\n        params: {\n          action: 'getAll'\n        }\n      },\n      'fetchDishes': {\n        method: 'GET',\n        isArray: true,\n        params: {\n          action: 'getAvailableDishesFromCategory'\n        }\n      }\n    });\n  }\n})();\n","(function() {\n  angular.module('app.services')\n    .factory('images', images)\n\n  images.$inject = [\n    '$resource'\n  ];\n\n  function images($resource) {\n    return $resource('/images/:action/:data', {}, {\n      'fetchAll': {\n        method: 'POST',\n        isArray: true,\n        params: {\n          action: 'getDishImages'\n        }\n      }\n    });\n  }\n})();\n","(function() {\n  angular.module('app.services')\n    .factory('orders', orders)\n\n  orders.$inject = [\n    '$resource'\n  ];\n\n  function orders($resource) {\n    return $resource('/order/:action/:request', {}, {\n      'create': {\n        method: 'POST',\n        params: {\n          action: 'createOrder'\n        }\n      }\n    });\n  }\n})();\n","(function() {\n    angular.module('app.services')\n        .factory('storage', storage)\n\n    /**\n     * @ngdoc service\n     * @name storage\n     * @module app.services\n     *\n     * @description\n     * Более удобная обертка над внешним сервисом localStorageService\n     */\n\n    storage.$inject = [\n        'localStorageService'\n    ];\n\n    function storage(localStorageService) {\n        return {\n            set: function(key, value) {\n                localStorageService.set(key, value);\n            },\n            get: function(key, defaultValue) {\n                return localStorageService.get(key) || defaultValue;\n            },\n            remove: function(key) {\n                localStorageService.remove(key);\n            },\n            setObject: function(key, value) {\n                localStorageService.set(key, JSON.stringify(value));\n            },\n            getObject: function(key) {\n                return JSON.parse(localStorageService.get(key)) || {};\n            },\n            getArray: function(key) {\n                return JSON.parse(localStorageService.get(key)) || [];\n            }\n        }\n    }\n})();","(function() {\n    angular.module('app.blocks')\n        .filter('postfix', PostfixFilter)\n\n    function PostfixFilter() {\n        return (value, postfix) => {\n            if (typeof postfix === 'string') {\n                return `${value} ${postfix}`.trim();\n            }\n        }\n    }\n})();\n","(function() {\n  angular.module('app.ctrls')\n    .controller('CartCtrl', CartCtrl)\n\n  CartCtrl.$inject = [\n    '$controller',\n    '$scope',\n  ];\n\n  function CartCtrl(\n    $controller,\n    $scope\n  ) {\n    let vm = this;\n\n    // Добавляем в текущий vm все что есть в SideBarCtrl.vm\n    angular.extend(vm, $controller('SideBarCtrl', {$scope: $scope}));\n    vm.orderInfo = calculateOrderInfo();\n\n    $scope.$watch(function() {\n      return vm.dishes;\n    }, function() {\n      vm.orderInfo = calculateOrderInfo();\n    }, true);\n\n    function calculateOrderInfo() {\n      let result = {\n        price: 0,\n        count: 0\n      };\n\n      if (vm.dishes) {\n        for (let dish of vm.dishes) {\n          result.price += dish.price * dish.count;\n          result.count += dish.count;\n        }\n      }\n\n      return result;\n    }\n  }\n})();\n","(function() {\n    angular.module('app.blocks')\n        .factory('helpers', helpers)\n\n    helpers.$inject = [];\n\n    function helpers() {\n\n        var service = {}\n\n        /**\n         * Возвращает новый массив разделенные на ряды, в каждом ряду будет sizeColumn колонок\n         * Helpers.shapeArrayInRows([0,1,2,3], 3) => [[0,1,2],[3]]\n         * @param {Array} array\n         * @param {Integer} sizeColumn\n         * @returns {Array}\n         */\n\n        service.shapeArrayInRows = (array, sizeColumn) => {\n            var result = [];\n\n            for (var i = 0; i < array.length; i += sizeColumn) {\n                result.push(array.slice(i, i + sizeColumn));\n            }\n\n            return result;\n        }\n\n        /**\n         * Выполняет поиск в массиве data, по переданному объекту search.\n         * Пример объекта search = {key: value}\n         * @param {Array} data\n         * @param {Object} search\n         * @returns {Object|Undefined}\n         */\n\n        service.searchByKey = (data, search) => {\n            let keys = Object.keys(search);\n\n            for (let row of data) {\n                if (row[keys[0]] == search[keys[0]]) {\n                    return row;\n                }\n            }\n        }\n\n        return service;\n    }\n})();","(function() {\n  angular.module('app.ctrls')\n    .controller('CategoryCtrl', CategoryCtrl)\n\n  CategoryCtrl.$inject = [\n    'spinner',\n    'pagination',\n    'categories',\n    'ngDialog',\n    'helpers',\n    '$stateParams'\n  ];\n\n  function CategoryCtrl(\n    spinner,\n    pagination,\n    categories,\n    ngDialog,\n    helpers,\n    $stateParams\n  ) {\n    let vm = this;\n\n    vm.pagination;\n    vm.dishes = [];\n\n    activate();\n\n    function activate() {\n      let promises = [getDishes()];\n      spinner.start(promises);\n    }\n\n    function getDishes() {\n      return categories.fetchDishes({\n        id: $stateParams.id\n      }).$promise.then((dishes) => {\n        vm.pagination = pagination.create(dishes);\n        vm.getMoreDishes();\n      });\n    }\n\n    vm.getMoreDishes = () => {\n      let chunkDishes = vm.pagination.next();\n\n      helpers.shapeArrayInRows(chunkDishes, 3).forEach((row) => {\n        vm.dishes.push(row);\n      });\n    }\n\n    vm.showDishDetail = (dish) => {\n      ngDialog.open({template: 'html/modals/dish.html', data: dish});\n    }\n  }\n})();\n","(function() {\n  angular.module('app.ctrls')\n    .controller('HomeCtrl', HomeCtrl)\n\n  HomeCtrl.$inject = [\n    'spinner',\n    'pagination',\n    'categories',\n    'ngDialog',\n    'helpers'\n  ];\n\n  function HomeCtrl(\n    spinner,\n    pagination,\n    categories,\n    ngDialog,\n    helpers\n  ) {\n    let vm = this;\n    vm.pagination;\n    vm.dishes = [];\n\n    activate();\n\n    function activate() {\n      let promises = [getDishes()];\n      spinner.start(promises);\n    }\n\n    function getDishes() {\n      return categories.fetchDishes({\n        id: 1\n      }).$promise.then(dishes => {\n        vm.pagination = pagination.create(dishes);\n        vm.getMoreDishes();\n      });\n    }\n\n    vm.getMoreDishes = () => {\n      let chunkDishes = vm.pagination.next();\n\n      helpers.shapeArrayInRows(chunkDishes, 3).forEach((row) => {\n        vm.dishes.push(row);\n      });\n    }\n\n    vm.showDishDetail = (dish) => {\n      ngDialog.open({template: 'html/modals/dish.html', data: dish});\n    }\n  }\n})();\n","(function() {\n  angular.module('app.ctrls')\n    .controller('OrderSuccessCtrl', OrderSuccessCtrl)\n\n  OrderSuccessCtrl.$inject = [\n    '$stateParams'\n  ];\n\n  function OrderSuccessCtrl(\n    $stateParams\n  ) {\n    let vm = this;\n\n    vm.step   = 1;\n    vm.client = $stateParams.client;\n\n    vm.nextStep = () => {\n      vm.step++;\n    }\n  }\n})();","(function() {\n    angular.module('app.core')\n        .factory('common', common)\n\n    common.$inject = [\n        '$q',\n        '$rootScope',\n        '$timeout',\n    ];\n\n    function common(\n        $q,\n        $rootScope,\n        $timeout\n    ) {\n        let service = {\n            $broadcast: $broadcast,\n            $emit: $emit,\n            $q: $q,\n            $timeout: $timeout\n        };\n\n        return service;\n\n        function $broadcast() {\n            return $rootScope.$broadcast.apply($rootScope, arguments);\n        }\n\n        function $emit() {\n            return $rootScope.$emit.apply($rootScope, arguments);\n        }\n    }\n})();","(function() {\n  angular.module('app.core')\n    .constant('ENV', {\n      \"apiUrl\": 'http://46.101.230.74:8080'\n    })\n    .constant('APP_EVENTS', {\n      editCart: 'edit-to-cart',\n      serverError: 'server-error',\n    })\n})();","(function() {\n    angular.module('app.core')\n        .factory('pagination', pagination)\n\n    pagination.$inject = [];\n\n    function pagination() {\n        let cnf     = {};\n        let entries = [];\n        let service = {\n            create: createPagination\n        };\n\n        return service;\n\n        function createPagination(entry, limit = 6) {\n            cnf.page  = 0;\n            cnf.total = calculateTotalPage(entry, limit);\n            cnf.limit = limit;\n\n            entries = entry;\n\n            // Pagination public method\n            return {\n                next: nextPage,\n                hasEnabled: hasPaginationEnabled\n            }\n        }\n\n        function nextPage() {\n            let chunkEntries = [];\n\n            if (cnf.page === 0) {\n                chunkEntries = entries.slice(cnf.page, cnf.limit);\n            } else {\n                chunkEntries = entries.slice(cnf.page * cnf.limit, (cnf.page * cnf.limit) + cnf.limit);\n            }\n\n            cnf.page++;\n\n            return chunkEntries;\n        }\n\n        function hasPaginationEnabled() {\n            return cnf.page < cnf.total\n        }\n\n        function calculateTotalPage(entries, limit) {\n            return Math.ceil(entries.length / limit);\n        }\n    }\n})();","(function() {\n  angular.module('app.core')\n    .config(($stateProvider, $urlRouterProvider) => {\n      $stateProvider\n        .state('index', {\n          url: '/',\n          views: {\n            '@': {\n              templateUrl: 'html/layouts/main.html',\n              resolve: {\n                appInit: function(categories, storage) {\n                  // Подгружаем категории\n                  return categories.fetchAll().$promise.then((categories) => {\n                    storage.setObject('categories', categories);\n                  });\n                }\n              }\n            },\n            'header@index': {\n              templateUrl: 'html/layouts/header-index.tpl.html',\n            },\n            'nav@index': {\n              templateUrl: 'html/layouts/nav.tpl.html',\n              controller: 'NavCtrl',\n              controllerAs: 'nav'\n            },\n            'sidebar@index': {\n              templateUrl: 'html/layouts/sidebar.tpl.html',\n              controller: 'SideBarCtrl',\n              controllerAs: 'sbar',\n            },\n            'content@index': {\n              templateUrl: 'html/components/home/home.tpl.html',\n              controller: 'HomeCtrl',\n              controllerAs: 'home'\n            },\n            'marketing@index': {\n              templateUrl: 'html/layouts/marketing.tpl.html',\n            },\n            'footer@index': {\n              templateUrl: 'html/layouts/footer.tpl.html',\n            },\n          },\n        })\n        .state('main', {\n          abstract: true,\n          url: '/',\n          views: {\n            '@': {\n              templateUrl: 'html/layouts/main.html',\n              resolve: {\n                appInit: function(categories, storage) {\n                  // Если нет категорий подгружаем\n                  if (!storage.getArray('categories').length) {\n                    return categories.fetchAll().$promise.then((categories) => {\n                      storage.setObject('categories', categories);\n                    });\n                  }\n                }\n              }\n            },\n            'header@main': {\n              templateUrl: 'html/layouts/header.tpl.html',\n            },\n            'nav@main': {\n              templateUrl: 'html/layouts/nav.tpl.html',\n              controller: 'NavCtrl',\n              controllerAs: 'nav'\n            },\n            'sidebar@main': {\n              templateUrl: 'html/layouts/sidebar.tpl.html',\n              controller: 'SideBarCtrl',\n              controllerAs: 'sbar',\n            },\n            'marketing@main': {\n              templateUrl: 'html/layouts/marketing.tpl.html',\n            },\n            'footer@main': {\n              templateUrl: 'html/layouts/footer.tpl.html',\n            },\n          },\n        })\n        .state('main.category', {\n          url: 'category/:id',\n          views: {\n            'content@main': {\n              controller: 'CategoryCtrl',\n              templateUrl: 'html/components/category/category.tpl.html',\n              controllerAs: 'cat'\n            }\n          }\n        })\n        .state('main.cart', {\n          url: 'cart',\n          views: {\n            'content@main': {\n              controller: 'CartCtrl',\n              templateUrl: 'html/components/cart/cart.tpl.html',\n              controllerAs: 'cart'\n            },\n            'sidebar@main': {\n              templateUrl: 'html/layouts/sidebar-order.tpl.html',\n              controller: 'SideBarOrderCtrl',\n              controllerAs: 'sbcar',\n            },\n          }\n        })\n        .state('main.order-success', {\n          url: 'order/success',\n          views: {\n            'content@main': {\n              controller: 'OrderSuccessCtrl',\n              templateUrl: 'html/components/order/order.tpl.html',\n              controllerAs: 'order'\n            }\n          },\n          params: {\n            client: null\n          }\n        })\n        .state('main.work', {\n          url: 'pages/work',\n          views: {\n            'content@main': {\n              templateUrl: 'html/components/pages/work.html',\n            }\n          }\n        })\n        .state('main.about', {\n          url: 'pages/about',\n          views: {\n            'content@main': {\n              templateUrl: 'html/components/pages/about.html',\n            }\n          }\n        })\n        .state('main.online', {\n          url: 'pages/online',\n          views: {\n            'content@main': {\n              templateUrl: 'html/components/pages/online.html',\n            }\n          }\n        })\n        .state('main.program', {\n          url: 'pages/program',\n          views: {\n            'content@main': {\n              templateUrl: 'html/components/pages/program.html',\n            }\n          }\n        })\n\n      $urlRouterProvider.otherwise('/');\n    })\n})();\n","(function() {\n  angular.module('app.core')\n    .directive('loadingSpinner', loadingSpinner)\n    .factory('spinner', spinner)\n\n  spinner.$inject = [\n    'common',\n    '$rootScope'\n  ];\n\n  function spinner(common, $rootScope) {\n    let service = {\n      start: startLoading\n    };\n\n    return service;\n\n    /**\n     * Запускает spinner во время выполнения промисов\n     * @param {Array} promise\n     */\n\n    function startLoading(promise) {\n      $rootScope.loadingSpinner = true;\n\n      common.$q.all(promise).then(() => {\n        common.$timeout(() => {\n          $rootScope.loadingSpinner = false;\n        }, 400);\n      });\n    }\n  }\n\n  function loadingSpinner() {\n    return {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'html/layouts/core/spinner.html'\n    }\n  }\n})();","(function() {\n  angular.module('app.blocks')\n    .directive('addCart', addCart)\n\n  addCart.$inject = [\n    'cart',\n    'ngDialog'\n  ];\n\n  function addCart(cart, ngDialog) {\n    return {\n      restrict: 'A',\n      scope: {\n        dish: '=dish'\n      },\n      link: (scope, element) => {\n        element.bind('click', () => {\n          scope.$apply(() => {\n            ngDialog.closeAll();\n            cart.add(scope.dish);\n          });\n        });\n      }\n    }\n  }\n})();","(function() {\n  angular.module('app.blocks')\n    .directive('imageSlider', imageSlider)\n\n  imageSlider.$inject = ['ENV'];\n\n  function imageSlider(ENV) {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {\n        images: '=images',\n        click: '&'\n      },\n      templateUrl: 'html/blocks/directive/image-slider/slider.html',\n      link: (scope) => {\n        scope.index = 0;\n\n        scope.clickImage = () => {\n          if (scope.onClick) {\n            scope.onClick()\n          }\n        }\n\n        scope.fullPath = (path) => {\n          return ENV.apiUrl + path;\n        }\n\n        scope.isCurrentIndex = (index) => {\n          return scope.index === index;\n        }\n\n        scope.prevSlide = () => {\n          let max  = scope.images.length - 1;\n          let next = scope.index - 1;\n\n          scope.index = (next === -1) ? max : next;\n        }\n\n        scope.nextSlide = () => {\n          let max  = scope.images.length - 1;\n          let next = scope.index + 1;\n\n          scope.index = (next > max) ? 0 : next;\n        }\n      }\n    }\n  }\n})();"],"sourceRoot":"/source/"}