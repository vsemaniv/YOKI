"use strict";!function(){angular.module("app",["app.core","app.services","app.resources","app.modals","app.filters","app.admin.panel","app.admin.dashboard","app.manager.dashboard","app.kitchen.orders","app.auth","app.layout"]).config(["localStorageServiceProvider","$anchorScrollProvider","ngDialogProvider","$httpProvider",function(e,a,o,t){e.setPrefix("YOKI-CRM").setStorageType("localStorage").setNotify(!0,!0),o.setDefaults({showClose:!0}),t.interceptors.push("apiInterceptor"),a.disableAutoScrolling(),t.defaults.useXDomain=!0,t.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",t.defaults.headers.post["Content-Type"]="application/json",t.defaults.headers.post.Accept="application/json"}]).run(["$rootScope","$location","user","USER_ROLES","helpers",function(e,a,o,t,r){e.location=a,e.go=function(e){a.path(e)},e.defaultRedirect=function(){return r.findString(o.roles(),t.admin)?void a.path("/admin/dashboard"):r.findString(o.roles(),t.manager)?void a.path("/manager/dashboard"):r.findString(o.roles(),t.kitchen)?void a.path("/kitchen/orders"):void 0}}])}();
"use strict";!function(){angular.module("app.filters",[])}();
"use strict";!function(){angular.module("app.modals",[])}();
"use strict";!function(){angular.module("app.layout",[])}();
"use strict";!function(){angular.module("app.core",["ngAnimate","ngResource","ngRoute","ngSanitize","ngLocale","ngDialog","LocalStorageModule","angular-jwt","templates","ngplus","720kb.datepicker","ui.mask","angular-click-outside","blocks.helpers","blocks.exception","blocks.logger","blocks.router","blocks.splash","blocks.edit-field","blocks.refresh-btn","blocks.image-upload","blocks.validator"])}();
"use strict";!function(){angular.module("app.resources",[])}();
"use strict";!function(){angular.module("app.services",[])}();
"use strict";!function(){angular.module("blocks.exception",["blocks.logger"])}();
"use strict";!function(){angular.module("blocks.logger",[])}();
"use strict";!function(){angular.module("blocks.router",["ngRoute","blocks.logger"])}();
"use strict";!function(){angular.module("blocks.splash",[])}();
"use strict";!function(){angular.module("blocks.refresh-btn",[])}();
"use strict";!function(){angular.module("blocks.validator",[])}();
"use strict";!function(){angular.module("app.admin.dashboard",[])}();
"use strict";!function(){angular.module("app.admin.panel",[])}();
"use strict";!function(){angular.module("app.auth",[])}();
"use strict";!function(){angular.module("app.kitchen.orders",[])}();
"use strict";!function(){angular.module("app.manager.dashboard",[])}();
"use strict";angular.module("ngLocale",[],["$provide",function(e){function M(e){e+="";var M=e.indexOf(".");return M==-1?0:e.length-M-1}function r(e,r){var n=r;void 0===n&&(n=Math.min(M(e),3));var E=Math.pow(10,n),a=(e*E|0)%E;return{v:n,f:a}}var n={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],ERANAMES:["до н. э.","н. э."],ERAS:["до н. э.","н. э."],FIRSTDAYOFWEEK:0,MONTH:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],SHORTDAY:["вс","пн","вт","ср","чт","пт","сб"],SHORTMONTH:["янв.","февр.","марта","апр.","мая","июня","июля","авг.","сент.","окт.","нояб.","дек."],STANDALONEMONTH:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],WEEKENDRANGE:[5,6],fullDate:"EEEE, d MMMM y 'г'.",longDate:"d MMMM y 'г'.",medium:"d MMM y 'г'. HH:mm:ss",mediumDate:"d MMM y 'г'.",mediumTime:"HH:mm:ss","short":"dd.MM.yy HH:mm",shortDate:"dd.MM.yy",shortTime:"HH:mm"},NUMBER_FORMATS:{CURRENCY_SYM:"₴",DECIMAL_SEP:",",GROUP_SEP:" ",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:" ¤",posPre:"",posSuf:" ¤"}]},id:"ru-ua",localeID:"ru_UA",pluralCat:function(e,M){var E=0|e,a=r(e,M);return 0==a.v&&E%10==1&&E%100!=11?n.ONE:0==a.v&&E%10>=2&&E%10<=4&&(E%100<12||E%100>14)?n.FEW:0==a.v&&E%10==0||0==a.v&&E%10>=5&&E%10<=9||0==a.v&&E%100>=11&&E%100<=14?n.MANY:n.OTHER}})}]);
"use strict";!function(){function t(){function t(t){return t.charAt(0).toUpperCase()}return t}angular.module("app.filters").filter("firstLetter",t)}();
"use strict";function _defineProperty(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}var _createClass=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}();!function(){function e(e){var n=[],r=function(){function r(e,t){_classCallCheck(this,r),this._subscribers={},this.events=t||{},this.scope={},n.push(_defineProperty({},e,this))}return _createClass(r,[{key:"on",value:function(e,n){this._subscribers[e]=n}},{key:"emit",value:function(e){for(var n=this._subscribers[e],r=arguments.length,t=Array(r>1?r-1:0),a=1;a<r;a++)t[a-1]=arguments[a];n.apply(n,t)}}],[{key:"get",value:function(e){var r={};return n.forEach(function(n){n[e]&&(r=n[e])}),r}},{key:"getClassName",value:function(){return e.isManager()?"manager-modal":""}}]),r}();return r}angular.module("app.modals").factory("BaseModal",e),e.$inject=["user"]}();
"use strict";!function(){function r(r,e,n,t,a){function o(){var r="адміністратор",e=a.roles();return n.findString(e,t.manager)&&(r="менеджер"),n.findString(e,t.kitchen)&&(r="кухня"),r}function i(){e.scope.createEnabled=!0,e.show()}var l=this;l.roleName=o(),l.orderHistory=r.show,l.createNewOrder=i}angular.module("app.layout").controller("Header",r),r.$inject=["orderHistoryIntervalModal","managerOrderDetailModal","helpers","USER_ROLES","user"]}();
"use strict";!function(){function i(i,n,o,t,e){function s(){e.ready().then(function(){u()})}function u(){i(function(){c.showSplash=!1},1e3)}function a(){t.logout()}var c=this;c.showSplash=!1,c.user=t.info(),c.isAdmin=t.isAdmin(),c.isKitchen=t.isKitchen(),c.isManager=t.isManager(),c.logout=a,s(),n.$on(o.userLogin,function(){c.user=t.info(),c.isAdmin=t.isAdmin(),c.isKitchen=t.isKitchen(),c.isManager=t.isManager()})}angular.module("app.layout").controller("Shell",i),i.$inject=["$timeout","$rootScope","APP_EVENTS","user","dataservice"]}();
"use strict";!function(){function t(t,o,n){function r(){return o.$broadcast.apply(o,arguments)}function c(){return o.$emit.apply(o,arguments)}var e={$broadcast:r,$emit:c,$q:t,$timeout:n};return e}angular.module("app.core").factory("common",t),t.$inject=["$q","$rootScope","$timeout"]}();
"use strict";!function(){function t(t){t.options.timeOut=3e3,t.options.positionClass="toast-bottom-right"}function e(t,e,r,o){t.debugEnabled&&t.debugEnabled(!0),r.config.$routeProvider=e;var n={ready:["dataservice",function(t){return t.ready()}]};r.config.resolveAlways=n,o.configure(a.appErrorPrefix)}function r(t,e,r){t.$on("$locationChangeStart",function(o){var n=e.routes[t.location.path()];n||(o.preventDefault(),r.isAuth()?t.defaultRedirect():t.go("/auth"))})}function o(t,e,r,o,n){t.$on("$locationChangeStart",function(i){var a=e.routes[t.location.path()];if(a.data&&a.data.authorities){var u=!1;a.data.authorities.forEach(function(t){o.findString(r.roles(),t)&&(u=!0)}),u||(i.preventDefault(),t.defaultRedirect(),n.error("Помилка доступу"))}})}function n(t,e,r){r.tokenGetter=["jwtHelper","$http","storage","$location",function(e,r,o,n){var i=o.get("token");if(angular.isDefined(i))return e.isTokenExpired(i)?r({url:t.apiUrl+"/auth/refresh",skipAuthorization:!1,method:"POST",headers:{Authorization:"Bearer "+i}}).then(function(t){var e=t.data.token;return o.set("token",e),e},function(){n.path("/logout")}):i}],e.interceptors.push("jwtInterceptor")}t.$inject=["toastr"];var i=angular.module("app.core"),a={appErrorPrefix:"[YOKI-CRM Error] ",appTitle:"YOKI CRM",version:"1.0.0"};i.value("config",a),i.config(t),i.config(e),i.config(n),i.run(r),i.run(o),e.$inject=["$logProvider","$routeProvider","routehelperConfigProvider","exceptionHandlerProvider"],r.$inject=["$rootScope","$route","user"],o.$inject=["$rootScope","$route","user","helpers","logger"],n.$inject=["ENV","$httpProvider","jwtInterceptorProvider"]}();
"use strict";!function(){angular.module("app.core").constant("ENV",{apiUrl:"http://46.101.230.74:8080/yoki"}).constant("APP_EVENTS",{serverError:"server-error",userLogin:"user-enter",userLogout:"user-logout",refreshPage:"refresh-page",refreshPageDone:"refresh-page-done"}).constant("USER_ROLES",{admin:"ROLE_ADMINISTRATOR",manager:"ROLE_OPERATOR",kitchen:"ROLE_KITCHEN",guest:"ROLE_GUEST"}).constant("toastr",toastr).constant("moment",moment)}();
"use strict";!function(){function n(n,t){function e(){function t(){a=!0}return c?c:c=n.when(!0).then(t)}function r(r){var a=c||e();return a.then(function(){return n.all(r)})["catch"](t.catcher('"ready" function failed'))}var c,a=!1,u={ready:r};return u}angular.module("app.core").factory("dataservice",n),n.$inject=["$q","exception"]}();
"use strict";!function(){function r(r){return r("/admin/:action/:data",{},{create:{method:"POST",params:{action:"create"}},fetchAll:{method:"GET",isArray:!0,params:{action:"getAll"}},history:{method:"GET",isArray:!0,params:{action:"getOrderHistory"}},declineOrder:{method:"POST",params:{action:"declineOrder"}},makeInCooking:{method:"POST",params:{action:"proceedToCooking"}},setOrderToCourier:{method:"POST",params:{action:"setOrderToCourier"}},passOrderToCourier:{method:"POST",params:{action:"passOrderToCourier"}},releaseCourier:{method:"POST",params:{action:"releaseCourier"}},courierOnPlace:{method:"POST",params:{action:"courierOnPlace"}}})}angular.module("app.resources").factory("admin",r),r.$inject=["$resource"]}();
"use strict";!function(){function t(t){return t("/auth/:action/:data",{},{login:{method:"POST",params:{action:""}}})}angular.module("app.resources").factory("auth",t),t.$inject=["$resource"]}();
"use strict";!function(){function e(e){return e("/category/:action/:id",{},{fetchAll:{method:"GET",isArray:!0,params:{action:"getAll"}},fetchDishes:{method:"GET",isArray:!0,params:{action:"getAllDishesFromCategory"}},create:{method:"POST",params:{action:"create"}},remove:{method:"GET",params:{action:"remove"}},removeDish:{method:"POST",params:{action:"removeDishFromCategory"}}})}angular.module("app.resources").factory("categories",e),e.$inject=["$resource"]}();
"use strict";!function(){function r(r){return r("/courier/:action/:data",{},{fetchAll:{method:"GET",isArray:!0,params:{action:"getAllCouriers"}}})}angular.module("app.resources").factory("courier",r),r.$inject=["$resource"]}();
"use strict";!function(){function a(a){return a("/dish/:action/:data",{},{create:{method:"POST",params:{action:"create"}},update:{method:"POST",params:{action:"update"}}})}angular.module("app.resources").factory("dishes",a),a.$inject=["$resource"]}();
"use strict";!function(){function a(a){return a("/images/:action/:data",{},{fetchAll:{method:"POST",isArray:!0,params:{action:"getDishImages"}}})}angular.module("app.resources").factory("images",a),a.$inject=["$resource"]}();
"use strict";!function(){function r(r){return r("/kitchen/:action/:data",{},{fetchAll:{method:"GET",isArray:!0,params:{action:"getOrders"}},prepared:{method:"POST",params:{action:"orderPrepared"}},notPrepared:{method:"POST",params:{action:"orderNotPrepared"}}})}angular.module("app.resources").factory("kitchen",r),r.$inject=["$resource"]}();
"use strict";function _defineProperty(e,r,a){return r in e?Object.defineProperty(e,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[r]=a,e}!function(){function e(e){return e("/operator/:action/:data",{},_defineProperty({create:{method:"POST",params:{action:"create"}},fetchAll:{method:"GET",isArray:!0,params:{action:"getAll"}},makeInProgress:{method:"POST",params:{action:"setOrderInProgress"}},close:{method:"POST",params:{action:"closeOrder"}},decline:{method:"POST",params:{action:"declineOrder"}},update:{method:"POST",params:{action:"updateOrder"}}},"create",{method:"POST",params:{action:"createOrder"}}))}angular.module("app.resources").factory("orders",e),e.$inject=["$resource"]}();
"use strict";!function(){angular.module("app.services").factory("apiInterceptor",["$rootScope","$q","ENV","exception",function(r,t,e,u){return{request:function(r){return r.uri=r.url,r.url.indexOf("html/",0)==-1&&(r.url=e.apiUrl+r.url),r},requestError:function(r){return t.reject(r)},responseError:function(r){return 401===r.status||403===r.status?u.catcher("Помилка входу в систему")(r):u.catcher("XHR помилка для "+r.config.uri)(r),t.reject(r)}}}])}();
"use strict";!function(){function e(e){return{set:function(t,n){e.set(t,n)},get:function(t,n){return e.get(t)||n},remove:function(t){e.remove(t)},setObject:function(t,n){e.set(t,JSON.stringify(n))},getObject:function(t){return JSON.parse(e.get(t))||{}},getArray:function(t){return JSON.parse(e.get(t))||[]}}}angular.module("app.services").factory("storage",e),e.$inject=["localStorageService"]}();
"use strict";!function(){function n(n,e,t,r,o,u,i,c,a){function f(){var n=a.get("token");E=!!n}function s(r){var o=n.defer();return c.login(r,function(n){m(n.token)?(a.set("token",n.token),E=!0,e.$broadcast(t.userLogin),o.resolve(n)):o.reject()},function(n){o.reject(n)}),o.promise}function g(){E=!1,a.remove("token"),o.path("/auth")}function l(){var n=a.get("token");if(n)return u.decodeToken(n)}function h(){var n=l(),e=[];return n?n.userRoles.forEach(function(n){e.push(n.name)}):e.push(r.guest),e}function d(){return p(r.admin)}function v(){return p(r.manager)}function k(){return p(r.kitchen)}function p(n){var e=h(),t=!1;return e&&i.findString(e,n)&&(t=!0),t}function m(n){var e=u.decodeToken(n),t=!0;return e.userRoles.forEach(function(n){"ROLE_COURIER"===n.name&&(t=!1)}),t}var E=!1,R={login:s,logout:g,info:l,roles:h,isAdmin:d,isManager:v,isKitchen:k,isAuth:function(){return E}};return f(),R}angular.module("app.services").factory("user",n),n.$inject=["$q","$rootScope","APP_EVENTS","USER_ROLES","$location","jwtHelper","helpers","auth","storage"]}();
"use strict";!function(){function e(){this.config={appErrorPrefix:void 0},this.configure=function(e){this.config.appErrorPrefix=e},this.$get=function(){return{config:this.config}}}function n(e){e.decorator("$exceptionHandler",i)}function i(e,n,i){return function(r,o){var t=n.config.appErrorPrefix||"",c={exception:r,cause:o};r.message=t+r.message,e(r,o),i.error(r.message,c)}}n.$inject=["$provide"],i.$inject=["$delegate","exceptionHandler","logger"],angular.module("blocks.exception").provider("exceptionHandler",e).config(n)}();
"use strict";!function(){function n(n){function r(r){return function(t){n.error(r,t)}}var t={catcher:r};return t}n.$inject=["logger"],angular.module("blocks.exception").factory("exception",n)}();
"use strict";!function(){function r(){var r={};return r.shapeArrayInRows=function(r,n){for(var t=[],e=0;e<r.length;e+=n)t.push(r.slice(e,e+n));return t},r.searchByKey=function(r,n){var t=Object.keys(n),e=void 0;return r.forEach(function(r){r[t[0]]==n[t[0]]&&(e=r)}),e},r.searchIndex=function(r,n){for(var t=Object.keys(n),e=void 0,i=0;i<r.length;i++)r[i][t[0]]==n[t[0]]&&(e=i);return e},r.nextElementInArray=function(r,n){var t=Object.keys(n),e=void 0;return r.forEach(function(r,i,c){r[t[0]]==n[t[0]]&&(e=c[i+1])}),e},r.prevElementInArray=function(r,n){var t=Object.keys(n),e=void 0;return r.forEach(function(r,i,c){r[t[0]]==n[t[0]]&&(e=c[i-1])}),e},r.findString=function(r,n){var t=!1;return r.forEach(function(r){r===n&&(t=r)}),t},r.compareById=function(r,n){return r.id>n.id?-1:r.id<n.id?1:0},r.filterOrdersByStatus=function(n,t){var e=[];return n.forEach(function(n){r.findString(t,n.status)&&e.push(n)}),e},r.calculateOrderInfo=function(r){var n={price:0,count:0},t=!0,e=!1,i=void 0;try{for(var c,o=r.dishes[Symbol.iterator]();!(t=(c=o.next()).done);t=!0){var u=c.value;n.price+=u.dish.price*u.quantity,n.count+=u.quantity}}catch(a){e=!0,i=a}finally{try{!t&&o["return"]&&o["return"]()}finally{if(e)throw i}}return n},r}angular.module("blocks.helpers",[]).factory("helpers",r),r.$inject=[]}();
"use strict";!function(){function n(n,o){function r(r,c,i){o.error(r,i),n.error("Error: "+r,c)}function c(r,c,i){o.info(r,i),n.info("Info: "+r,c)}function i(r,c,i){o.success(r,i),n.info("Success: "+r,c)}function s(r,c,i){o.warning(r,i),n.warn("Warning: "+r,c)}var t={showToasts:!0,error:r,info:c,success:i,warning:s,log:n.log};return t}angular.module("blocks.logger").factory("logger",n),n.$inject=["$log","toastr"]}();
"use strict";!function(){function e(e){return{restrict:"E",replace:!0,transclude:!0,scope:{placeholder:"@"},require:"ngModel",templateUrl:"html/blocks/edit-field/edit-field.html",link:function(i,t,d,n){i.editMode=!1,i.editModeOn=function(){i.fieldData=n.$viewValue,i.editMode=!0},i.editModeOff=function(){i.fieldData=n.$viewValue,i.editMode=!1},i.editSave=function(){i.fieldData?(n.$setViewValue(i.fieldData),n.$render(),i.editModeOff()):e.error("Поле не повинно бути порожнім!")},t.bind("keydown keypress",function(e){13===e.which&&(i.$apply(function(){i.editSave()}),e.preventDefault())}),n.$render=function(){i.fieldData=n.$viewValue},n.$render()}}}angular.module("blocks.edit-field",[]).directive("editField",e),e.$inject=["toastr"]}();
"use strict";!function(){function e(e,i){return{restrict:"E",replace:!0,scope:{},require:"ngModel",templateUrl:"html/blocks/image-upload/image-upload.html",link:function(a,t,s,r){function n(e){for(var a=i.defer(),t=0,s=[],r=0;r<e.length;r++){var n=new FileReader;n.onload=function(i){t++,s.push(btoa(i.target.result)),t===e.length&&a.resolve(s)},n.readAsBinaryString(e[r])}return a.promise}function l(e){a.imagesDish.splice(a.imagesDish.indexOf(e),1),a.imagesDish.length||(a.uploaded=!1,r.$setValidity("required",!1)),r.$setViewValue(a.imagesDish)}function o(e){for(var i={status:!0,reason:null},a=0;a<e.length;a++)e[a].size>g.max_filesize&&(i.status=!1,i.reason="max_filesize"),g.types.indexOf(e[a].type)===-1&&(i.status=!1,i.reason="format");return i}function u(i){var a="";switch(i.reason){case"max_filesize":a="Максимальний розмір файла 2Мб";break;case"format":a="Заборонений тип файлу"}e.error(a)}a.uploaded=!1,a.imagesDish=[],a.removeImage=l,r.$render=function(){r.$viewValue.length?(a.uploaded=!0,a.imagesDish=r.$viewValue,r.$setValidity("required",!0)):r.$setValidity("required",!1)},r.$render();var d=t.find("input"),g={max_filesize:2097152,types:["image/png","image/jpg","image/jpeg"]};d.on("change",function(t){var s=t.target.files,l=o(s);l.status?i.all([n(s)]).then(function(i){a.imagesDish=i[0],a.uploaded=!0,r.$setViewValue(i[0]),e.success("Изображения загружены")}):u(l)})}}}angular.module("blocks.image-upload",[]).directive("imageUpload",e),e.$inject=["toastr","$q"]}();
"use strict";!function(){function o(){this.config={},this.$get=function(){return{config:this.config}}}function r(o,r,e,t,n){function i(o){o.forEach(function(o){o.config.resolve=angular.extend(o.config.resolve||{},n.config.resolveAlways),l.when(o.url,o.config)}),l.otherwise({redirectTo:"/auth"})}function u(){r.$on("$routeChangeError",function(r,e,n,i){if(!g){s.errors++,g=!0;var u=e&&(e.title||e.name||e.loadedTemplateUrl)||"unknown target",c="Error routing to "+u+". "+(i.msg||"");t.warning(c,[e]),o.path("/")}})}function c(){u()}function f(){for(var o in e.routes)if(e.routes.hasOwnProperty(o)){var r=e.routes[o],t=!!r.title;t&&a.push(r)}return a}var g=!1,s={errors:0},a=[],l=n.config.$routeProvider,h={configureRoutes:i,getRoutes:f,routeCounts:s};return c(),h}angular.module("blocks.router").provider("routehelperConfig",o).factory("routehelper",r),r.$inject=["$location","$rootScope","$route","logger","routehelperConfig"]}();
"use strict";!function(){function e(e,n){function t(t){n.splashScreen=!0,e.$q.all(t).then(function(){e.$timeout(function(){n.splashScreen=!1},600)})}function c(){e.$timeout(function(){n.splashScreen=!1},600)}function s(t){n.splashScreen=!0,e.$timeout(function(){n.splashScreen=!1},t)}var o={show:t,hide:c,delay:s};return o}function n(){return{restrict:"E",replace:!0,templateUrl:"html/blocks/splash-screen/splash-screen.html"}}angular.module("blocks.splash").directive("splashScreen",n).factory("splash",e),e.$inject=["common","$rootScope"]}();
"use strict";!function(){function e(e,r,n){return{restrict:"E",replace:!0,scope:{},templateUrl:"html/blocks/refresh-btn/refresh-btn.html",link:function(t){function o(){t.refreshEnabled||(n.cancel(f),c())}function c(){r.$broadcast(e.refreshPage),t.refreshEnabled=!0}function s(){f=n(c,2e4)}t.refreshPage=o,t.refreshEnabled=!1;var f=void 0;s();var a=r.$on(e.refreshPageDone,function(){t.refreshEnabled=!1,s()});t.$on("$destroy",function(){f&&n.cancel(f)}),t.$on("$destroy",a)}}}angular.module("blocks.refresh-btn").directive("refreshBtn",e),e.$inject=["APP_EVENTS","$rootScope","$timeout"]}();
"use strict";!function(){function r(){function r(r,n){var e={errors:[]};return n.forEach(function(n){r.hasOwnProperty(n.field)&&!function(){var u=r[n.field];n.rules.forEach(function(r){t[r](u)||e.errors.push({field:n.field,rule:r})})}()}),e}function n(r){var n=!1;return Array.isArray(r)?r.length&&(n=!0):r&&(n=!0),n}function e(r){var n=!1;return 10===r.length&&(n=!0),n}var t={required:n,phone:e},u={run:r};return u}angular.module("blocks.validator").factory("validator",r),r.$inject=[]}();
"use strict";!function(){function e(e,t){function a(){e.open({template:"html/modals/categories/categories.html",width:"30%",showClose:!1,controller:"categoriesCreateModalCtrl",controllerAs:"vm"})}function o(){e.close()}var r={create:"create"},c=new t("createModal",r),n=angular.extend(c,{show:a,hide:o});return n}function t(e,t,a){function o(){e.create(r.form,function(){c.hide(),a.success("Категорія добавлена"),c.emit(c.events.create)})}var r=this,c=t.get("createModal");r.create=o,r.form={name:""}}angular.module("app.modals").factory("categoriesCreateModal",e).controller("categoriesCreateModalCtrl",t),e.$inject=["ngDialog","BaseModal"],t.$inject=["categories","BaseModal","toastr"]}();
"use strict";!function(){function e(e,t){function a(){e.open({template:"html/modals/dishes/create.html",width:"60%",showClose:!1,controller:"dishesCreateModalCtrl",controllerAs:"vm"})}function n(){e.close()}var s={create:"create"},o=new t("dishesCreateModal",s),r=angular.extend(o,{show:a,hide:n});return r}function t(e,t,a){function n(){s.spinner=!0,e.create(s.form,function(){s.spinner=!1,o.hide(),a.success("Страву добавлена"),o.emit(o.events.create)},function(){s.spinner=!1})}var s=this,o=t.get("dishesCreateModal");s.create=n,s.spinner=!1,s.form={images:[],name:"",price:"",description:"",type:"ORDINARY",categoryId:o.scope.selectedCategory.id},s.types=[{name:"Звичайний",value:"ORDINARY"},{name:"Новинка",value:"LATEST"},{name:"Гостра страва",value:"HOT"},{name:"Вегетаріанська страва",value:"VEGAN"}]}angular.module("app.modals").factory("dishesCreateModal",e).controller("dishesCreateModalCtrl",t),e.$inject=["ngDialog","BaseModal"],t.$inject=["dishes","BaseModal","toastr"]}();
"use strict";!function(){function e(e,t){function s(){e.open({template:"html/modals/dishes/edit.html",width:"60%",showClose:!1,controller:"dishesEditModalCtrl",controllerAs:"vm"})}function n(){e.close()}var o={update:"update"},i=new t("dishesEditModal",o),a=angular.extend(i,{show:s,hide:n});return a}function t(e,t,s){function n(){o.spinner=!0,e.update(o.form,function(e){o.spinner=!1,i.hide(),s.success("Страву обновлено"),i.emit(i.events.update,e)},function(){o.spinner=!1})}var o=this,i=t.get("dishesEditModal"),a=i.scope.images;o.update=n,o.spinner=!1,o.form={images:a,id:i.scope.id,name:i.scope.name,price:i.scope.price,description:i.scope.description,type:i.scope.type,categoryId:i.scope.categoryId},o.types=[{name:"Звичайний",value:"ORDINARY"},{name:"Новинка",value:"LATEST"},{name:"Гостра страва",value:"HOT"},{name:"Вегетаріанська страва",value:"VEGAN"}]}angular.module("app.modals").factory("dishesEditModal",e).controller("dishesEditModalCtrl",t),e.$inject=["ngDialog","BaseModal"],t.$inject=["dishes","BaseModal","toastr"]}();
"use strict";!function(){function e(e,t){function s(){e.open({template:"html/modals/dishes/select.html",showClose:!1,appendClassName:t.getClassName()+" select-modal",controller:"dishesSelectModalCtrl",controllerAs:"vm"})}function i(){var t=e.getOpenDialogs();e.close(t[1])}var n={selected:"selected"},l=new t("dishesSelectModal",n),o=angular.extend(l,{show:s,hide:i});return o}function t(e,t,s,i,n){function l(){return t.fetchAll().$promise.then(function(e){return f.categories=e,e[0]}).then(function(e){return t.fetchDishes({id:e.id}).$promise.then(function(t){f.selectedCategory=e,f.dishes=h(t)})})}function o(e){f.spinner=!0,t.fetchDishes({id:e.id},function(t){f.selectedCategory=e,f.dishes=h(t),u()})}function c(e){var t=d(e);t?t.quantity++:(e.quantity=1,f.listOfDishes.push(e))}function a(e){var t=d(e);t&&(t.quantity--,t.quantity||f.listOfDishes.splice(f.listOfDishes.indexOf(t),1))}function d(e){return s.searchByKey(f.listOfDishes,{dishId:e.dishId})}function r(){p.emit(p.events.selected,f.listOfDishes),p.hide()}function h(e){return e.map(function(e){return{dish:e,dishId:e.id,quantity:0}})}function u(){e(function(){f.spinner=!1},400)}var f=this,p=n.get("dishesSelectModal");f.spinner=!0,f.searchDish=d,f.loadDishes=o,f.incQuantity=c,f.decQuantity=a,f.pushDishes=r,f.listOfDishes=p.scope.dishes,f.categories=[],f.dishes=[],f.selectedCategory,i.all([l()]).then(function(){u()})}angular.module("app.modals").factory("dishesSelectModal",e).controller("dishesSelectModalCtrl",t),e.$inject=["ngDialog","BaseModal"],t.$inject=["$timeout","categories","helpers","$q","BaseModal"]}();
"use strict";!function(){function o(o,r){function e(){o.open({template:"html/modals/history/history.html",showClose:!1,appendClassName:r.getClassName()+" orders-history",controller:"orderHistoryModalCtrl",controllerAs:"vm"})}function t(){o.close()}var a=new r("orderHistoryModal"),l=angular.extend(a,{show:e,hide:t});return l}function r(o,r){function e(){n.hide(),r.show()}function t(o){return o.map(function(o){return angular.extend(o,{showDetail:!1})})}function a(o){o.showDetail=!o.showDetail}var l=this,n=o.get("orderHistoryModal");l.orders=t(n.scope.orders),l.hideBack=n.scope.hideBack,l.showIntervalModal=e,l.toggleOrderDetail=a}angular.module("app.modals").factory("orderHistoryModal",o).controller("orderHistoryModalCtrl",r),o.$inject=["ngDialog","BaseModal"],r.$inject=["BaseModal","orderHistoryIntervalModal"]}();
"use strict";!function(){function r(r,o){function t(){r.open({template:"html/modals/history/interval.html",width:"30%",showClose:!1,appendClassName:o.getClassName(),controller:"orderHistoryIntervalModalCtrl",controllerAs:"vm"})}function e(){r.close()}var n=new o("orderHistoryIntervalModal"),a=angular.extend(n,{show:t,hide:e});return a}function o(r,o,t){function e(){n.spinner=!0;var t={startDate:n.form.start+" 00:00:00",endDate:n.form.finish+" 00:00:00"};r.history(t,function(r){n.spinner=!1,o.scope={orders:r},a.hide(),o.show()})}var n=this,a=t.get("orderHistoryIntervalModal");n.spinner=!1,n.getOrders=e,n.form={start:"",finish:""}}angular.module("app.modals").factory("orderHistoryIntervalModal",r).controller("orderHistoryIntervalModalCtrl",o),r.$inject=["ngDialog","BaseModal"],o.$inject=["admin","orderHistoryModal","BaseModal"]}();
"use strict";!function(){function e(e,s){function o(){e.open({template:"html/modals/manager/order-detail-mini.html",showClose:!1,appendClassName:s.getClassName()+" order-detail",controller:"managerOrderDetailMiniCtrl",controllerAs:"vm"})}function r(){e.close()}var a={decline:"decline"},l=new s("managerOrderDetailMiniModal",a),n=angular.extend(l,{show:o,hide:r});return n}function s(e,s,o,r){function a(){if(1==n.showCloseMessage)if(""!==n.closeMessage){var e={id:n.order.id,message:n.closeMessage,status:"DELIVERY_FAILED"};r.decline(e,function(){o.success("Замовлення закрите")}),i.emit(i.events.decline,n.order),i.hide()}else o.error("Введіть причину відмови від замовлення");n.showCloseMessage=!0,n.closeBtnMessage="відмінити"}function l(){n.showCloseMessage=!1,n.closeBtnMessage="відміна замовлення"}var n=this,i=e.get("managerOrderDetailMiniModal");n.order=i.scope.order,n.closeMessage="",n.showCloseMessage=!!n.closeMessage,n.closeBtnMessage=n.closeMessage?"відмінити":"відміна замовлення",n.orderInfo=s.calculateOrderInfo(n.order),n.showCloseOrderForm=a,n.hideCloseOrderForm=l}angular.module("app.modals").factory("managerOrderDetailMiniModal",e).controller("managerOrderDetailMiniCtrl",s),e.$inject=["ngDialog","BaseModal"],s.$inject=["BaseModal","helpers","toastr","orders"]}();
"use strict";!function(){function e(e,r){function s(){e.open({template:"html/modals/manager/order-detail.html",showClose:!1,appendClassName:r.getClassName()+" order-detail",controller:"managerOrderDetailCtrl",controllerAs:"vm"})}function d(){e.close()}var o={update:"update",create:"create",decline:"decline"},n=new r("managerOrderDetailModal",o),t=angular.extend(n,{show:s,hide:d});return t}function r(e,r,s,d,o,n,t,a,i){function l(e){var r=o.searchByKey(I.order.dishes,{dishId:e.dishId});r.quantity++}function c(e){var r=o.searchByKey(I.order.dishes,{dishId:e.dishId});r.quantity--,r.quantity||(h()?r.quantity++:I.order.dishes.splice(I.order.dishes.indexOf(r),1))}function u(e){if(!h()){var r=o.searchByKey(I.order.dishes,{dishId:e.dishId});I.order.dishes.splice(I.order.dishes.indexOf(r),1)}}function h(){return!(I.order.dishes.length-1)&&(t.error("Замовлення не можу бути порожнім!"),!0)}function f(){var e=angular.copy(I.order);r.scope.dishes=e.dishes,r.show()}function m(){d.history({clientPhone:I.order.client.phoneNumber},function(e){s.scope={orders:e,hideBack:!0},s.show()})}function g(){if(1==I.showCloseMessage)if(""!==I.closeMessage){var e={id:I.order.id,message:I.closeMessage,status:"DECLINED"};i.decline(e,function(){t.success("Замовлення відмінено")}),O.emit(O.events.decline,I.order),O.hide()}else t.error("Введіть причину відмови від замовлення");I.showCloseMessage=!0,I.closeBtnMessage="відмінити"}function p(){I.showCloseMessage=!1,I.closeBtnMessage="відміна замовлення"}function M(){I.order.dishes.length?I.createEnabled?v():y():t.error("Замовлення не можу бути порожнім!")}function v(){I.order.status="KITCHEN";var e={id:I.order.id,client:{name:I.order.client.name,phone:I.order.client.phoneNumber,address:I.order.client.address},dishes:I.order.dishes,status:I.order.status};O.hide(),i.create(e,function(e){O.emit(O.events.create,e),t.success("Замовлення оформлено")})}function y(){I.order.status="KITCHEN";var e={id:I.order.id,client:{name:I.order.client.name,phone:I.order.client.phoneNumber,address:I.order.client.address},dishes:I.order.dishes,status:I.order.status};O.emit(O.events.update,I.order),O.hide(),i.update(e,function(){t.success("Замовлення оформлено")})}function C(e){var r=!1,s=n.run(e.client,w),d=n.run(e,D);return s.errors.length||d.errors.length||(r=!0),r}var I=this,O=e.get("managerOrderDetailModal"),w=[{field:"name",rules:["required"]},{field:"address",rules:["required"]},{field:"phoneNumber",rules:["required","phone"]}],D=[{field:"dishes",rules:["required"]}];if(I.createEnabled=O.scope.createEnabled,I.createEnabled){var N={client:{address:"",name:"",phoneNumber:""},dishes:[],status:"FRESH"};I.order=N}else I.order=O.scope.order;I.closeMessage="",I.showCloseMessage=!!I.closeMessage,I.closeBtnMessage=I.closeMessage?"відмінити":"відміна замовлення",I.orderInfo=o.calculateOrderInfo(I.order),I.orderValid=!0,I.selectDishesModal=f,I.historyOrdersModal=m,I.incQuantity=l,I.decQuantity=c,I.removeDish=u,I.showCloseOrderForm=g,I.hideCloseOrderForm=p,I.saveOrder=M,a.$watch(function(){return I.order.dishes},function(){I.orderInfo=o.calculateOrderInfo(I.order)},!0),a.$watch(function(){return I.order},function(e){C(e)?I.orderValid=!0:I.orderValid=!1},!0),r.on(r.events.selected,function(e){I.order.dishes=e})}angular.module("app.modals").factory("managerOrderDetailModal",e).controller("managerOrderDetailCtrl",r),e.$inject=["ngDialog","BaseModal"],r.$inject=["BaseModal","dishesSelectModal","orderHistoryModal","admin","helpers","validator","toastr","$scope","orders"]}();
"use strict";!function(){function e(e,r,o,i,n,t,s){function a(){return e.fetchAll({}).$promise.then(function(e){m.callCenter=c(e,p.callCenter).sort(t.compareById),m.kitchen=c(e,p.kitchen).sort(t.compareById),m.delivery=c(e,p.delivery).sort(t.compareById),m.ordersLoading=!1})}function c(e,r){var o=[];return e.forEach(function(e){t.findString(r,e.status)&&o.push(e)}),o}function u(e){g=e,s.open({template:"html/modals/order-detail-admin.html",className:"ngdialog-theme-default order-detail",controller:f})}function d(e){var r={price:0,count:0},o=!0,i=!1,n=void 0;try{for(var t,s=e.dishes[Symbol.iterator]();!(o=(t=s.next()).done);o=!0){var a=t.value;r.price+=a.dish.price*a.quantity,r.count+=a.quantity}}catch(c){i=!0,n=c}finally{try{!o&&s["return"]&&s["return"]()}finally{if(i)throw n}}return r}function l(e){var r=t.searchByKey(m.kitchen,{id:e.id});m.kitchen.splice(m.kitchen.indexOf(r),1),m.delivery.push(e),m.delivery.sort(t.compareById)}function f(e,r,o,i){function n(){y=s.open({template:"html/modals/order-delivery-admin.html",width:"350px",showClose:!1,controller:h})}function t(){g.status="COOKING",i.makeInCooking({id:g.id},function(){o.success("Замовлення відправлено на кухню")})}e.order=g,e.closeMessage="",e.showCloseMessage=!!e.closeMessage,e.closeBtnMessage=e.closeMessage?"відмінити":"відміна замовлення",e.orderInfo=d(g),e.showModalDelivery=n,e.makeInCooking=t,e.showCloseOrderForm=function(){if(1==e.showCloseMessage)if(""!==e.closeMessage){var n={id:e.order.id,status:"CANT_PREPARE",message:e.closeMessage};i.declineOrder(n,function(){o.success("Замовлення відмінено")});var t=r.searchByKey(m.kitchen,{id:g.id});m.kitchen.splice(m.kitchen.indexOf(t),1),m.kitchen.sort(r.compareById),s.close()}else o.error("Введіть причину відмови від замовлення");e.showCloseMessage=!0,e.closeBtnMessage="відмінити"},e.hideCloseOrderForm=function(){e.showCloseMessage=!1,e.closeBtnMessage="відміна замовлення"},e.passOrder=function(){g.courierDetails?(i.passOrderToCourier({id:g.id},function(){o.success("Замовлення видано кур’єру")}),g.status="DELIVERY",l(g),s.close()):o.warning("Необхідно назначити кур’єра на замовлення!")}}function h(e,r,o,i){function n(){o.fetchAll({},function(r){e.courierList=d(r),e.pageLoading=!1})}function t(){y.close()}function s(r){"BUSY"===r.status?i.warning("Кур’єр зайнятий"):(a(r),e.formCourier.id=r.id,r.showForm=!r.showForm)}function a(r){e.courierList.forEach(function(e){e.id!==r.id&&(e.showForm=!1)})}function c(o){var n=f();if(u()){var s=n.yyyy+"-"+n.mm+"-"+n.dd,a=l(e.formCourier.start),c=l(e.formCourier.finish);r.setOrderToCourier({timeToTake:s+" "+a.hours+":"+a.minutes+":00",timeToDeliver:s+" "+c.hours+":"+c.minutes+":00",id:g.id,courierId:o.id}),g.courierDetails=o,i.success("Інформація передана кур’єру"),t()}else i.error("Необхідно заповнити всі поля")}function u(){var r=!0;for(var o in e.formCourier)e.formCourier.hasOwnProperty(o)&&(e.formCourier[o]||(r=!1));return r}function d(e){var r=e.filter(function(e){if("OUT"!==e.status)return!0});return r.map(function(e){var r="FREE"===e.status,o=r?"вільний":"зайнятий";return{account:e.account,id:e.id,messagingToken:e.messagingToken,status:e.status,statusText:o,free:r,showForm:!1}})}function l(e){return{hours:e.substr(0,2),minutes:e.substr(2,4)}}function f(){var e=new Date,r=e.getDate(),o=e.getMonth()+1,i=e.getFullYear();return r<10&&(r="0"+r),o<10&&(o="0"+o),{yyyy:i,mm:o,dd:r}}e.closeModal=t,e.showForm=s,e.sendCourier=c,e.courierList=[],e.pageLoading=!0,e.formCourier={id:0,start:"",finish:""},n()}var m=this;m.callCenter=[],m.kitchen=[],m.delivery=[],m.ordersLoading=!0,m.showModalOrder=u;var g=void 0,y=void 0,p={callCenter:["FRESH","IN_PROGRESS"],kitchen:["KITCHEN","COOKING","PREPARED"],delivery:["DELIVERY","DONE"]};a(),o.$on(r.refreshPage,function(){i.all([a()]).then(function(){o.$emit(r.refreshPageDone)})}),f.$inject=["$scope","helpers","toastr","admin"],h.$inject=["$scope","admin","courier","toastr"]}angular.module("app.admin.dashboard").controller("DashboardAdmin",e),e.$inject=["orders","APP_EVENTS","$scope","$q","admin","helpers","ngDialog"]}();
"use strict";!function(){function a(a,o){a.configureRoutes(n(o))}function n(a){return[{url:"/admin/dashboard",config:{templateUrl:"html/components/admin/dashboard/dashboard.html",controller:"DashboardAdmin",controllerAs:"dash",data:{authorities:[a.admin]}}}]}a.$inject=["routehelper","USER_ROLES"],n.$inject=["USER_ROLES"],angular.module("app.admin.dashboard").run(a)}();
"use strict";!function(){function e(e,i,t,n,s,o,c,r,d){function a(){return s.fetchAll().$promise.then(function(e){return m.categories=e,e[0]}).then(function(e){return s.fetchDishes({id:e.id}).$promise.then(function(i){return m.selectedCategory=e,m.dishes=i,m.dishes})}).then(function(){return f(m.dishes)})}function h(e){m.spinner=!0,s.fetchDishes({id:e.id},function(i){m.selectedCategory=e,m.dishes=i,f(m.dishes).then(function(){y()})})}function u(){var e="Ви справді бажаєте видалити категорію - "+m.selectedCategory.name+"?";confirm(e)&&s.remove({id:m.selectedCategory.id},function(){var e=n.searchByKey(m.categories,{id:m.selectedCategory.id});m.categories.splice(m.categories.indexOf(e),1),m.selectedCategory=m.categories[0],h(m.categories[0]),d.success("Категорія видалена")})}function f(e){var i=e.filter(function(e){if(e.images.length)return!0}),t=[];return i.forEach(function(e){var i={dishId:e.id,links:[]};e.images.forEach(function(e){i.links.push(e.link)}),t.push(i)}),o.fetchAll(t).$promise.then(function(i){i.forEach(function(i){var t=n.searchByKey(e,{id:i.dishId});t&&(t.images=i.images)})})}function l(e){var i="Ви справді бажаєте видалити страву?";confirm(i)&&s.removeDish({id:m.selectedCategory.id,dishes:[{id:e}]},function(){var i=n.searchByKey(m.dishes,{id:e});m.dishes.splice(m.dishes.indexOf(i),1),d.success("Страву видалено")})}function g(e){var t=angular.extend({categoryId:m.selectedCategory.id},e);i.scope=t,i.show()}function y(){c(function(){m.spinner=!1},400)}var m=this;e.scope=m,m.spinner=!0,m.loadDishes=h,m.removeDish=l,m.removeCategory=u,m.showModalDishAdd=e.show,m.showModalCategoryAdd=t.show,m.showModalDishEdit=g,m.selectedCategory,r.all([a()]).then(function(){y()}),e.on(e.events.create,function(){s.fetchDishes({id:m.selectedCategory.id},function(e){f(e).then(function(){m.dishes=e})})}),i.on(i.events.update,function(e){s.fetchDishes({id:m.selectedCategory.id},function(e){f(e).then(function(){m.dishes=e})})}),t.on(t.events.create,function(){s.fetchAll({},function(e){m.categories=e})})}angular.module("app.admin.panel").controller("Panel",e),e.$inject=["dishesCreateModal","dishesEditModal","categoriesCreateModal","helpers","categories","images","$timeout","$q","toastr"]}();
"use strict";!function(){function n(n,t){n.configureRoutes(e(t))}function e(n){return[{url:"/admin/panel",config:{templateUrl:"html/components/admin/panel/panel.html",controller:"Panel",controllerAs:"panel",data:{authorities:[n.admin]}}}]}n.$inject=["routehelper","USER_ROLES"],angular.module("app.admin.panel").run(n)}();
"use strict";!function(){function n(n,o,e,r){var s=this;s.form={username:"",password:""},s.login=function(){o.login(s.form).then(function(){var s=o.info();r.success("Вхід здійснено успішно: "+s.sub),e.delay(1500),n.defaultRedirect()})["finally"](function(){s.form={username:"",password:""}})}}angular.module("app.auth").controller("Auth",n),n.$inject=["$rootScope","user","splash","logger"]}();
"use strict";!function(){function t(t,n){t.configureRoutes(u(n))}function u(t){return[{url:"/auth",config:{templateUrl:"html/components/common/auth/auth.html",controller:"Auth",controllerAs:"auth",data:{authorities:[t.guest]}}}]}t.$inject=["routehelper","USER_ROLES"],u.$inject=["USER_ROLES"],angular.module("app.auth").run(t)}();
"use strict";!function(){function e(e,r,o,n,t,i,c){function d(){return r.fetchAll({}).$promise.then(function(e){k.cooking=o.filterOrdersByStatus(e,O.cooking).sort(o.compareById),k.prepared=o.filterOrdersByStatus(e,O.prepared).sort(o.compareById),h(k.cooking),h(k.prepared),k.ordersLoad=!0})}function a(e){var o=l(e);o.toggle=!1,s(e),r.prepared({id:e.id},function(){n.success("Статус замовлення змінено")})}function p(e){var o=l(e);o.toggle=!1,u(e),r.notPrepared({id:e.id},function(){n.success("Статус замовлення змінено")})}function s(e){k.cooking.splice(k.cooking.indexOf(e),1),k.prepared.push(e),k.prepared.sort(o.compareById)}function u(e){k.prepared.splice(k.prepared.indexOf(e),1),k.cooking.push(e),k.cooking.sort(o.compareById)}function f(e){var r=l(e);r&&(r.toggle=!r.toggle)}function g(){e(function(){k.spinner=!1},400)}function l(e){return o.searchByKey(m,{id:e.id})}function h(e){e.forEach(function(e){l(e)||m.push({id:e.id,toggle:!1})})}var k=this;k.spinner=!0,k.orders=[],k.makePrepared=a,k.makeNotPrepared=p,k.toggleDetailOrder=f,k.findToggleOrder=l,k.ordersLoad=!1;var m=[],O={cooking:["COOKING"],prepared:["PREPARED"]};c.all([d()]).then(function(){g()}),i.$on(t.refreshPage,function(){c.all([d()]).then(function(){i.$emit(t.refreshPageDone)})})}angular.module("app.kitchen.orders").controller("Orders",e),e.$inject=["$timeout","kitchen","helpers","toastr","APP_EVENTS","$scope","$q"]}();
"use strict";!function(){function e(e,t){e.configureRoutes(r(t))}function r(e){return[{url:"/kitchen/orders",config:{templateUrl:"html/components/kitchen/orders/orders.html",controller:"Orders",controllerAs:"kitchen",data:{authorities:[e.kitchen]}}}]}e.$inject=["routehelper","USER_ROLES"],r.$inject=["USER_ROLES"],angular.module("app.kitchen.orders").run(e)}();
"use strict";!function(){function e(e,n,r,t,i,a,o){function c(){return e.fetchAll({}).$promise.then(function(e){f.callCenter=d(e,v.callCenter).sort(i.compareById),f.kitchen=d(e,v.kitchen).sort(i.compareById),f.delivery=d(e,v.delivery).sort(i.compareById),f.ordersLoading=!1})}function d(e,n){var r=[];return e.forEach(function(e){i.findString(n,e.status)&&r.push(e)}),r}function s(e,n){p=u(e),y=n,"FRESH"===p.status&&l(p);var r=angular.copy(p);n?(a.scope.createEnabled=!1,a.scope.order=r,a.show()):(o.scope.order=r,o.show())}function l(n){n.status="IN_PROGRESS",e.makeInProgress({id:n.id})}function u(e){return e.dishes=e.dishes.map(function(e){return{dish:e.dish,id:e.id,dishId:e.dish.id,quantity:e.quantity}}),e}function h(e){var n=i.searchByKey(f.callCenter,{id:e.id});f.callCenter.splice(f.callCenter.indexOf(n),1),f.kitchen.push(e),f.kitchen.sort(i.compareById)}var f=this;f.callCenter=[],f.kitchen=[],f.delivery=[],f.ordersLoading=!0,f.showModalOrder=s,f.makeInProgress=l;var p=void 0,y=!0,v={callCenter:["FRESH","IN_PROGRESS"],kitchen:["KITCHEN","COOKING","PREPARED"],delivery:["DELIVERY","DONE"]};c(),r.$on(n.refreshPage,function(){t.all([c()]).then(function(){r.$emit(n.refreshPageDone)})}),a.on(a.events.create,function(e){f.kitchen.push(e),f.kitchen.sort(i.compareById)}),a.on(a.events.update,function(e){h(e)}),a.on(a.events.decline,function(e){var n=i.searchByKey(f.callCenter,{id:e.id});f.callCenter.splice(f.callCenter.indexOf(n),1),f.callCenter.sort(i.compareById)}),o.on(o.events.decline,function(e){var n=i.searchByKey(f.delivery,{id:e.id});f.delivery.splice(f.delivery.indexOf(n),1),f.delivery.sort(i.compareById)})}angular.module("app.manager.dashboard").controller("DashboardManager",e),e.$inject=["orders","APP_EVENTS","$scope","$q","helpers","managerOrderDetailModal","managerOrderDetailMiniModal"]}();
"use strict";!function(){function a(a,n){a.configureRoutes(r(n))}function r(a){return[{url:"/manager/dashboard",config:{templateUrl:"html/components/manager/dashboard/dashboard.html",controller:"DashboardManager",controllerAs:"dash",data:{authorities:[a.manager]}}}]}a.$inject=["routehelper","USER_ROLES"],r.$inject=["USER_ROLES"],angular.module("app.manager.dashboard").run(a)}();
//# sourceMappingURL=bundle.min.js.map
