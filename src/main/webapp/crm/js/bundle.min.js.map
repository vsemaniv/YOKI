{"version":3,"sources":["app.module.js","layout/layout.module.js","resources/resources.module.js","filters/filter.module.js","services/services.module.js","modals/modals.module.js","core/core.module.js","blocks/exception/exception.module.js","blocks/logger/logger.module.js","blocks/dish-switch/dish-switch.module.js","blocks/splash-screen/splash-screen.module.js","blocks/refresh-btn/refresh-btn.module.js","blocks/router/router.module.js","blocks/validator/validator.module.js","components/common/auth/auth.module.js","components/admin/dashboard/dashboard.module.js","components/admin/panel/panel.module.js","components/kitchen/orders/orders.module.js","components/manager/dashboard/dashboard.module.js","angular-locale_ru-ua.js","layout/header.js","layout/shell.js","resources/admin.js","resources/auth.js","resources/categories.js","resources/courier.js","resources/dishes.js","resources/images.js","resources/kitchen.js","resources/orders.js","filters/first-letter.js","services/api-interceptor.js","services/storage.js","services/user.js","modals/BaseModal.js","core/common.js","core/config.js","core/constants.js","core/dataservice.js","blocks/exception/exception-handler.provider.js","blocks/exception/exception.js","blocks/helper/func.js","blocks/logger/logger.js","blocks/edit-field/edit-field.js","blocks/dish-switch/dish-switch.js","blocks/image-upload/image-upload.js","blocks/splash-screen/splash-screen.js","blocks/refresh-btn/refresh-btn.js","blocks/router/routehelper.js","blocks/validator/array-required.js","blocks/validator/validator.js","modals/categories/categories.js","modals/dishes/create.js","modals/dishes/edit.js","modals/dishes/select.js","modals/manager/order-detail-mini.js","modals/manager/order-detail.js","modals/history/history.js","modals/history/interval.js","components/common/auth/auth.js","components/common/auth/auth.route.js","components/admin/dashboard/dashboard.js","components/admin/dashboard/dashboard.route.js","components/admin/panel/panel.js","components/admin/panel/panel.route.js","components/kitchen/orders/orders.js","components/kitchen/orders/orders.route.js","components/manager/dashboard/dashboard.js","components/manager/dashboard/dashboard.route.js"],"names":["angular","module","config","localStorageServiceProvider","$anchorScrollProvider","ngDialogProvider","$httpProvider","setPrefix","setStorageType","setNotify","setDefaults","showClose","interceptors","push","disableAutoScrolling","defaults","useXDomain","headers","common","post","run","$rootScope","$location","user","USER_ROLES","helpers","location","go","path","defaultRedirect","findString","roles","admin","manager","kitchen","$provide","getDecimals","n","i","indexOf","length","getVF","opt_precision","v","undefined","Math","min","base","pow","f","PLURAL_CATEGORY","ZERO","ONE","TWO","FEW","MANY","OTHER","value","DATETIME_FORMATS","AMPMS","DAY","ERANAMES","ERAS","FIRSTDAYOFWEEK","MONTH","SHORTDAY","SHORTMONTH","STANDALONEMONTH","WEEKENDRANGE","fullDate","longDate","medium","mediumDate","mediumTime","short","shortDate","shortTime","NUMBER_FORMATS","CURRENCY_SYM","DECIMAL_SEP","GROUP_SEP","PATTERNS","gSize","lgSize","maxFrac","minFrac","minInt","negPre","negSuf","posPre","posSuf","id","localeID","pluralCat","vf","Header","intervalModal","orderDetailModal","getRoleName","result","showModalOrder","scope","createEnabled","show","vm","this","roleName","orderHistory","createNewOrder","controller","$inject","Shell","$timeout","APP_EVENTS","dataservice","activate","ready","then","hideSplash","showSplash","logout","info","isAdmin","isKitchen","isManager","$on","userLogin","$resource","create","method","params","action","fetchAll","isArray","history","declineOrder","makeInCooking","setOrderToCourier","passOrderToCourier","releaseCourier","courierOnPlace","factory","auth","login","categories","fetchDishes","remove","removeDish","courier","dishes","update","deactivate","images","upload","transformRequest","identity","Content-Type","prepared","notPrepared","_defineProperty","obj","key","Object","defineProperty","enumerable","configurable","writable","orders","makeInProgress","close","decline","firstLetter","firstLetterFilter","item","charAt","toUpperCase","filter","$q","ENV","exception","request","uri","url","apiUrl","requestError","reject","responseError","response","status","catcher","storage","localStorageService","set","get","defaultValue","setObject","JSON","stringify","getObject","parse","getArray","jwtHelper","isAuth","token","isAuthenticated","form","deferred","defer","exceptCourier","$broadcast","resolve","error","promise","getInfo","decodeToken","getRoles","userRoles","forEach","role","name","guest","isRole","service","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","descriptor","protoProps","staticProps","prototype","BaseModal","cache","BaseModalClass","events","_subscribers","eventName","cb","sub","_len","arguments","args","Array","_key","apply","modal","$emit","toastrConfig","toastr","options","timeOut","positionClass","configure","$logProvider","$routeProvider","routehelperConfigProvider","exceptionHandlerProvider","debugEnabled","resolveAlways","appErrorPrefix","defaultRoute","$route","event","route","routes","preventDefault","secureRoutes","logger","data","authorities","access","attachAuthToken","jwtInterceptorProvider","tokenGetter","$http","isDefined","isTokenExpired","skipAuthorization","Authorization","newToken","core","appTitle","version","constant","serverError","userLogout","refreshPage","refreshPageDone","moment","prime","success","isPrimed","primePromise","when","nextPromises","readyPromise","all","$get","decorator","extendExceptionHandler","$delegate","exceptionHandler","cause","errorData","message","provider","reason","$filter","shapeArrayInRows","array","sizeColumn","slice","searchByKey","conditions","keys","row","searchIndex","index","nextElementInArray","prevElementInArray","string","compareById","prev","next","filterOrdersByStatus","statuses","results","order","calculateOrderInfo","price","count","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","dish","quantity","err","getDate","today","Date","dd","mm","getMonth","yyyy","getFullYear","str","getHourMinutes","hours","substr","minutes","parseDate","date","hhmm","foo","$log","title","warning","warn","showToasts","log","editField","restrict","replace","transclude","placeholder","required","mask","require","templateUrl","link","element","attrs","ngModel","editMode","editModeOn","input","query","getElementsByClassName","focus","fieldData","$viewValue","editModeOff","editSave","$setViewValue","$render","queryResult","spanElements","bind","$apply","which","directive","dishSwitch","attr","knobLabel","on","enabled","imageUpload","uploadBinary","files","countUploaded","dataURL","FileReader","onload","readerEvt","btoa","readAsBinaryString","removeImage","image","imagesDish","splice","uploaded","$setValidity","validate","valid","size","opts","max_filesize","types","type","printError","errorMsg","find","changeEvent","file","validator","binaries","splash","showScreen","splashScreen","hideScreen","delayScreen","delay","hide","refreshBtn","immediatelyRefresh","refreshEnabled","cancel","timeout","startTimeout","refreshListen","routehelperConfig","routehelper","configureRoutes","extend","otherwise","redirectTo","handleRoutingErrors","current","previous","rejection","handlingRouteChangeError","routeCounts","errors","destination","loadedTemplateUrl","msg","init","getRoutes","prop","hasOwnProperty","isRoute","arrayRequired","elm","runValidator","object","rules","report","ruleObj","field","rule","validators","phone","createCategory","ngDialog","showModal","open","template","width","controllerAs","hideModal","createCategoryCtrl","emit","createDish","createDishCtrl","spinner","console","created","fd","FormData","append","description","categoryId","selectedCategory","editDish","dishesEditModalCtrl","dishId","links","updateDish","selectDish","appendClassName","getClassName","dialogs","getOpenDialogs","selected","selectDishCtrl","$promise","firstCategory","transformDishesData","loadDishes","category","hideSpinner","incQuantity","search","searchDish","listOfDishes","decQuantity","pushDishes","map","orderDetail","orderDetailCtrl","showCloseOrderForm","showCloseMessage","closeMessage","closeBtnMessage","hideCloseOrderForm","orderInfo","selectModal","historylModal","$scope","lastDishInOrder","showSelectModal","copy","showHistoryModal","clientPhone","client","phoneNumber","hideBack","saveOrder","createOrder","updateOrder","timeToDeliver","convertHHmm","orderData","address","validateOrder","clientReport","clientRules","orderReport","orderRules","orderFrame","orderValid","selectDishesModal","historyOrdersModal","$watch","newValue","orderHistoryCtrl","showIntervalModal","addShowDetailProperty","showDetail","toggleOrderDetail","orderHistoryInterval","orderHistoryIntervalCtrl","historyModal","getOrders","sendData","startDate","start","endDate","finish","Auth","username","password","appRun","DashboardAdmin","callCenter","sort","delivery","ordersLoading","selectedOrder","className","orderDetailModalCtrl","transferOrderInDelivery","showModalDelivery","deliveryModal","orderDeliveryModalCtrl","passOrder","courierDetails","couriers","courierList","transformCouriers","pageLoading","closeModal","showForm","hideAllFormsExceptCourier","formCourier","cour","sendCourier","validateForm","todayStr","timeToTake","courierId","online","free","statusText","account","messagingToken","Panel","dishCreateModal","dishEditModal","categoryModal","removeCategory","confirm","removeDishFromCategory","idDish","showDishEditModal","showModalDishAdd","showModalCategoryAdd","showModalDishEdit","Orders","cooking","makeToggleObjects","ordersLoad","makeOrderPrepared","toggleObj","findToggleOrder","toggle","transferOrderInPrepared","makeOrderNotPrepared","transferOrderInCooking","toggleDetailOrder","toggleOrders","makePrepared","makeNotPrepared","DashboardManager","orderDetailMiniModal","full","transformOrderData","modalFull","transferOrderInKitchen"],"mappings":"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","file":"bundle.min.js","sourcesContent":["(function() {\n  angular.module('app', [\n      'app.core',\n      'app.services',\n      'app.resources',\n      'app.modals',\n      'app.filters',\n\n      /*\n       * Feature areas\n       */\n\n      'app.admin.panel',\n      'app.admin.dashboard',\n      'app.manager.dashboard',\n      'app.kitchen.orders',\n      'app.auth',\n      'app.layout'\n    ])\n    .config((\n      localStorageServiceProvider,\n      $anchorScrollProvider,\n      ngDialogProvider,\n      $httpProvider\n    ) => {\n      localStorageServiceProvider\n        .setPrefix('YOKI-CRM')\n        .setStorageType('localStorage')\n        .setNotify(true, true);\n\n      ngDialogProvider.setDefaults({\n        showClose: true\n      });\n\n      $httpProvider.interceptors.push('apiInterceptor');\n      $anchorScrollProvider.disableAutoScrolling();\n\n      $httpProvider.defaults.useXDomain                         = true;\n      $httpProvider.defaults.headers.common['X-Requested-With'] = 'XMLHttpRequest';\n      $httpProvider.defaults.headers.post['Content-Type']       = 'application/json';\n      $httpProvider.defaults.headers.post['Accept']             = 'application/json';\n    })\n    .run((\n      $rootScope,\n      $location,\n      user,\n      USER_ROLES,\n      helpers\n    ) => {\n      $rootScope.location = $location;\n      $rootScope.go       = (path) => {\n        $location.path(path);\n      }\n\n      $rootScope.defaultRedirect = () => {\n        if (helpers.findString(user.roles(), USER_ROLES.admin)) {\n          $location.path('/admin/dashboard');\n          return;\n        }\n\n        if (helpers.findString(user.roles(), USER_ROLES.manager)) {\n          $location.path('/manager/dashboard');\n          return;\n        }\n\n        if (helpers.findString(user.roles(), USER_ROLES.kitchen)) {\n          $location.path('/kitchen/orders');\n          return;\n        }\n      }\n    })\n})();\n","(function() {\n  'use strict';\n\n  angular.module('app.layout', []);\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.resources', []);\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.filters', []);\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.services', []);\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals', []);\n})();","(function() {\n  'use strict';\n\n  angular.module('app.core', [\n    /**\n     * Angular modules\n     */\n\n    'ngAnimate',\n    'ngResource',\n    'ngRoute',\n    'ngSanitize',\n    'ngLocale',\n\n    /**\n     * 3rd Party modules\n     */\n\n    'ngDialog',\n    'LocalStorageModule',\n    'angular-jwt',\n    'templates',\n    'ngplus',\n    '720kb.datepicker',\n    'ui.mask',\n    'angular-click-outside',\n\n    /**\n     * Reusable blocks\n     */\n\n    'blocks.helpers',\n    'blocks.exception', \n    'blocks.logger', \n    'blocks.router',\n    'blocks.splash',\n    'blocks.edit-field',\n    'blocks.refresh-btn',\n    'blocks.image-upload',\n    'blocks.validator',\n    'blocks.dish-switch',\n  ]);\n})();\n","(function() {\n    'use strict';\n\n    angular.module('blocks.exception', ['blocks.logger']);\n})();\n","(function() {\n    'use strict';\n\n    angular.module('blocks.logger', []);\n})();\n","(function() {\n  'use strict';\n\n  angular.module('blocks.dish-switch', []);\n})();\n","(function() {\n  'use strict';\n\n  angular.module('blocks.splash', []);\n})();\n","(function() {\n  'use strict';\n\n  angular.module('blocks.refresh-btn', []);\n})();\n","(function() {\n    'use strict';\n\n    angular.module('blocks.router', [\n        'ngRoute',\n        'blocks.logger'\n    ]);\n})();\n","(function() {\n  'use strict';\n\n  angular.module('blocks.validator', []);\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.auth', []);\n})();","(function() {\n  'use strict';\n\n  angular.module('app.admin.dashboard', []);\n})();\n","(function() {\n  'use strict';\n\n  angular.module('app.admin.panel', []);\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.kitchen.orders', []);\n})();","(function() {\n  'use strict';\n\n  angular.module('app.manager.dashboard', []);\n})();\n","'use strict';\nangular.module(\"ngLocale\", [], [\"$provide\", function($provide) {\n  var PLURAL_CATEGORY = {\n    ZERO: \"zero\",\n    ONE: \"one\",\n    TWO: \"two\",\n    FEW: \"few\",\n    MANY: \"many\",\n    OTHER: \"other\"\n  };\n\n  function getDecimals(n) {\n    n     = n + '';\n    var i = n.indexOf('.');\n    return (i == -1) ? 0 : n.length - i - 1;\n  }\n\n  function getVF(n, opt_precision) {\n    var v = opt_precision;\n\n    if (undefined === v) {\n      v = Math.min(getDecimals(n), 3);\n    }\n\n    var base = Math.pow(10, v);\n    var f    = ((n * base) | 0) % base;\n    return {v: v, f: f};\n  }\n\n  $provide.value(\"$locale\", {\n    \"DATETIME_FORMATS\": {\n      \"AMPMS\": [\n        \"AM\",\n        \"PM\"\n      ],\n      \"DAY\": [\n        \"\\u0432\\u043e\\u0441\\u043a\\u0440\\u0435\\u0441\\u0435\\u043d\\u044c\\u0435\",\n        \"\\u043f\\u043e\\u043d\\u0435\\u0434\\u0435\\u043b\\u044c\\u043d\\u0438\\u043a\",\n        \"\\u0432\\u0442\\u043e\\u0440\\u043d\\u0438\\u043a\",\n        \"\\u0441\\u0440\\u0435\\u0434\\u0430\",\n        \"\\u0447\\u0435\\u0442\\u0432\\u0435\\u0440\\u0433\",\n        \"\\u043f\\u044f\\u0442\\u043d\\u0438\\u0446\\u0430\",\n        \"\\u0441\\u0443\\u0431\\u0431\\u043e\\u0442\\u0430\"\n      ],\n      \"ERANAMES\": [\n        \"\\u0434\\u043e \\u043d. \\u044d.\",\n        \"\\u043d. \\u044d.\"\n      ],\n      \"ERAS\": [\n        \"\\u0434\\u043e \\u043d. \\u044d.\",\n        \"\\u043d. \\u044d.\"\n      ],\n      \"FIRSTDAYOFWEEK\": 0,\n      \"MONTH\": [\n        \"\\u044f\\u043d\\u0432\\u0430\\u0440\\u044f\",\n        \"\\u0444\\u0435\\u0432\\u0440\\u0430\\u043b\\u044f\",\n        \"\\u043c\\u0430\\u0440\\u0442\\u0430\",\n        \"\\u0430\\u043f\\u0440\\u0435\\u043b\\u044f\",\n        \"\\u043c\\u0430\\u044f\",\n        \"\\u0438\\u044e\\u043d\\u044f\",\n        \"\\u0438\\u044e\\u043b\\u044f\",\n        \"\\u0430\\u0432\\u0433\\u0443\\u0441\\u0442\\u0430\",\n        \"\\u0441\\u0435\\u043d\\u0442\\u044f\\u0431\\u0440\\u044f\",\n        \"\\u043e\\u043a\\u0442\\u044f\\u0431\\u0440\\u044f\",\n        \"\\u043d\\u043e\\u044f\\u0431\\u0440\\u044f\",\n        \"\\u0434\\u0435\\u043a\\u0430\\u0431\\u0440\\u044f\"\n      ],\n      \"SHORTDAY\": [\n        \"\\u0432\\u0441\",\n        \"\\u043f\\u043d\",\n        \"\\u0432\\u0442\",\n        \"\\u0441\\u0440\",\n        \"\\u0447\\u0442\",\n        \"\\u043f\\u0442\",\n        \"\\u0441\\u0431\"\n      ],\n      \"SHORTMONTH\": [\n        \"\\u044f\\u043d\\u0432.\",\n        \"\\u0444\\u0435\\u0432\\u0440.\",\n        \"\\u043c\\u0430\\u0440\\u0442\\u0430\",\n        \"\\u0430\\u043f\\u0440.\",\n        \"\\u043c\\u0430\\u044f\",\n        \"\\u0438\\u044e\\u043d\\u044f\",\n        \"\\u0438\\u044e\\u043b\\u044f\",\n        \"\\u0430\\u0432\\u0433.\",\n        \"\\u0441\\u0435\\u043d\\u0442.\",\n        \"\\u043e\\u043a\\u0442.\",\n        \"\\u043d\\u043e\\u044f\\u0431.\",\n        \"\\u0434\\u0435\\u043a.\"\n      ],\n      \"STANDALONEMONTH\": [\n        \"\\u044f\\u043d\\u0432\\u0430\\u0440\\u044c\",\n        \"\\u0444\\u0435\\u0432\\u0440\\u0430\\u043b\\u044c\",\n        \"\\u043c\\u0430\\u0440\\u0442\",\n        \"\\u0430\\u043f\\u0440\\u0435\\u043b\\u044c\",\n        \"\\u043c\\u0430\\u0439\",\n        \"\\u0438\\u044e\\u043d\\u044c\",\n        \"\\u0438\\u044e\\u043b\\u044c\",\n        \"\\u0430\\u0432\\u0433\\u0443\\u0441\\u0442\",\n        \"\\u0441\\u0435\\u043d\\u0442\\u044f\\u0431\\u0440\\u044c\",\n        \"\\u043e\\u043a\\u0442\\u044f\\u0431\\u0440\\u044c\",\n        \"\\u043d\\u043e\\u044f\\u0431\\u0440\\u044c\",\n        \"\\u0434\\u0435\\u043a\\u0430\\u0431\\u0440\\u044c\"\n      ],\n      \"WEEKENDRANGE\": [\n        5,\n        6\n      ],\n      \"fullDate\": \"EEEE, d MMMM y '\\u0433'.\",\n      \"longDate\": \"d MMMM y '\\u0433'.\",\n      \"medium\": \"d MMM y '\\u0433'. HH:mm:ss\",\n      \"mediumDate\": \"d MMM y '\\u0433'.\",\n      \"mediumTime\": \"HH:mm:ss\",\n      \"short\": \"dd.MM.yy HH:mm\",\n      \"shortDate\": \"dd.MM.yy\",\n      \"shortTime\": \"HH:mm\"\n    },\n    \"NUMBER_FORMATS\": {\n      \"CURRENCY_SYM\": \"\\u20b4\",\n      \"DECIMAL_SEP\": \",\",\n      \"GROUP_SEP\": \"\\u00a0\",\n      \"PATTERNS\": [\n        {\n          \"gSize\": 3,\n          \"lgSize\": 3,\n          \"maxFrac\": 3,\n          \"minFrac\": 0,\n          \"minInt\": 1,\n          \"negPre\": \"-\",\n          \"negSuf\": \"\",\n          \"posPre\": \"\",\n          \"posSuf\": \"\"\n        },\n        {\n          \"gSize\": 3,\n          \"lgSize\": 3,\n          \"maxFrac\": 2,\n          \"minFrac\": 2,\n          \"minInt\": 1,\n          \"negPre\": \"-\",\n          \"negSuf\": \"\\u00a0\\u00a4\",\n          \"posPre\": \"\",\n          \"posSuf\": \"\\u00a0\\u00a4\"\n        }\n      ]\n    },\n    \"id\": \"ru-ua\",\n    \"localeID\": \"ru_UA\",\n    \"pluralCat\": function(n, opt_precision) {\n      var i  = n | 0;\n      var vf = getVF(n, opt_precision);\n      if (vf.v == 0 && i % 10 == 1 && i % 100 != 11) {\n        return PLURAL_CATEGORY.ONE;\n      }\n      if (vf.v == 0 && i % 10 >= 2 && i % 10 <= 4 && (i % 100 < 12 || i % 100 > 14)) {\n        return PLURAL_CATEGORY.FEW;\n      }\n      if (vf.v == 0 && i % 10 == 0 || vf.v == 0 && i % 10 >= 5 && i % 10 <= 9 || vf.v == 0 && i % 100 >= 11 && i % 100 <= 14) {\n        return PLURAL_CATEGORY.MANY;\n      }\n      return PLURAL_CATEGORY.OTHER;\n    }\n  });\n}]);","(function() {\n  'use strict';\n\n  angular\n    .module('app.layout')\n    .controller('Header', Header);\n\n  Header.$inject = [\n    'orderHistoryIntervalModal',\n    'managerOrderDetailModal',\n    'helpers',\n    'USER_ROLES',\n    'user'\n  ];\n\n  function Header(\n    intervalModal,\n    orderDetailModal,\n    helpers,\n    USER_ROLES,\n    user\n  ) {\n    var vm = this;\n\n    vm.roleName       = getRoleName();\n    vm.orderHistory   = intervalModal.show;\n    vm.createNewOrder = showModalOrder;\n\n    ////////////////\n\n    function getRoleName() {\n      let result = 'адміністратор',\n          roles  = user.roles();\n\n      if (helpers.findString(roles, USER_ROLES.manager)) {\n        result = 'менеджер';\n      }\n\n      if (helpers.findString(roles, USER_ROLES.kitchen)) {\n        result = 'кухня';\n      }\n\n      return result;\n    }\n\n    function showModalOrder() {\n      orderDetailModal.scope.createEnabled = true;\n      orderDetailModal.show();\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.layout')\n    .controller('Shell', Shell);\n\n  Shell.$inject = [\n    '$timeout',\n    '$rootScope',\n    'APP_EVENTS',\n    'user',\n    'dataservice'\n  ];\n\n  function Shell(\n    $timeout,\n    $rootScope,\n    APP_EVENTS,\n    user,\n    dataservice\n  ) {\n    var vm = this;\n\n    vm.showSplash = false;\n    vm.user       = user.info();\n    vm.isAdmin    = user.isAdmin();\n    vm.isKitchen  = user.isKitchen();\n    vm.isManager  = user.isManager();\n    vm.logout     = logout;\n\n    activate();\n\n    function activate() {\n      // Using a resolver on all routes or dataservice.ready in every controller\n      dataservice.ready().then(function() {\n        hideSplash();\n      });\n    }\n\n    function hideSplash() {\n      $timeout(function() {\n        vm.showSplash = false;\n      }, 1000);\n    }\n\n    function logout() {\n      user.logout();\n    }\n\n    // Если пользователь вошел в приложение\n    $rootScope.$on(APP_EVENTS.userLogin, function() {\n      vm.user      = user.info();\n      vm.isAdmin   = user.isAdmin();\n      vm.isKitchen = user.isKitchen();\n      vm.isManager = user.isManager();\n    });\n  }\n})();\n","(function() {\n  angular.module('app.resources')\n    .factory('admin', admin)\n\n  admin.$inject = [\n    '$resource'\n  ];\n\n  function admin($resource) {\n    return $resource('/admin/:action/:data', {}, {\n      'create': {\n        method: 'POST',\n        params: {\n          action: 'create'\n        }\n      },\n      'fetchAll': {\n        method: 'GET',\n        isArray: true,\n        params: {\n          action: 'getAll'\n        }\n      },\n      'history': {\n        method: 'GET',\n        isArray: true,\n        params: {\n          action: 'getOrderHistory'\n        }\n      },\n      'declineOrder': {\n        method: 'POST',\n        params: {\n          action: 'declineOrder'\n        }\n      },\n      'makeInCooking': {\n        method: 'POST',\n        params: {\n          action: 'proceedToCooking'\n        }\n      },\n      'setOrderToCourier': {\n        method: 'POST',\n        params: {\n          action: 'setOrderToCourier'\n        }\n      },\n      'passOrderToCourier': {\n        method: 'POST',\n        params: {\n          action: 'passOrderToCourier'\n        }\n      },\n      'releaseCourier': {\n        method: 'POST',\n        params: {\n          action: 'releaseCourier'\n        }\n      },\n      'courierOnPlace': {\n        method: 'POST',\n        params: {\n          action: 'courierOnPlace'\n        }\n      }\n    });\n  }\n})();\n","(function() {\n  angular.module('app.resources')\n    .factory('auth', auth)\n\n  auth.$inject = [\n    '$resource'\n  ];\n\n  function auth($resource) {\n    return $resource('/auth/:action/:data', {}, {\n      'login': {\n        method: 'POST',\n        params: {\n          action: ''\n        }\n      }\n    });\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.resources')\n    .factory('categories', categories);\n\n  categories.$inject = [\n    '$resource'\n  ];\n\n  /* @ngInject */\n  function categories($resource) {\n    return $resource('/category/:action/:id', {}, {\n      'fetchAll': {\n        method: 'GET',\n        isArray: true,\n        params: {\n          action: 'getAll'\n        }\n      },\n      'fetchDishes': {\n        method: 'GET',\n        isArray: true,\n        params: {\n          action: 'getAllDishesFromCategory'\n        }\n      },\n      'create': {\n        method: 'POST',\n        params: {\n          action: 'create'\n        }\n      },\n      'remove': {\n        method: 'GET',\n        params: {\n          action: 'remove'\n        }\n      },\n      'removeDish': {\n        method: 'POST',\n        params: {\n          action: 'removeDishFromCategory'\n        }\n      }\n    });\n  }\n})();\n\n","(function() {\n  angular.module('app.resources')\n    .factory('courier', courier)\n\n  courier.$inject = [\n    '$resource'\n  ];\n\n  function courier($resource) {\n    return $resource('/courier/:action/:data', {}, {\n      'fetchAll': {\n        method: 'GET',\n        isArray: true,\n        params: {\n          action: 'getAllCouriers'\n        }\n      }\n    });\n  }\n})();\n","(function() {\n  angular.module('app.resources')\n    .factory('dishes', dishes)\n\n  dishes.$inject = [\n    '$resource'\n  ];\n\n  function dishes($resource) {\n    return $resource('/dish/:action/:data', {}, {\n      'create': {\n        method: 'POST',\n        params: {\n          action: 'create'\n        }\n      },\n      'update': {\n        method: 'POST',\n        params: {\n          action: 'update'\n        }\n      },\n      'activate': {\n        method: 'POST',\n        params: {\n          action: 'activate'\n        }\n      },\n      'deactivate': {\n        method: 'POST',\n        params: {\n          action: 'deactivate'\n        }\n      },\n    });\n  }\n})();\n","(function() {\n  angular.module('app.resources')\n    .factory('images', images)\n\n  images.$inject = [\n    '$resource'\n  ];\n\n  function images($resource) {\n    return $resource('/images/:action/:data', {}, {\n      'fetchAll': {\n        method: 'POST',\n        isArray: true,\n        params: {\n          action: 'getDishImages'\n        }\n      },\n      'upload': {\n        method: 'POST',\n        transformRequest: angular.identity,\n        headers: {'Content-Type': undefined},\n        params: {\n          action: 'addImages'\n        }\n      }\n    });\n  }\n})();\n","(function() {\n  angular.module('app.resources')\n    .factory('kitchen', kitchen)\n\n  kitchen.$inject = [\n    '$resource'\n  ];\n\n  function kitchen($resource) {\n    return $resource('/kitchen/:action/:data', {}, {\n      'fetchAll': {\n        method: 'GET',\n        isArray: true,\n        params: {\n          action: 'getOrders'\n        }\n      },\n      'prepared': {\n        method: 'POST',\n        params: {\n          action: 'orderPrepared'\n        }\n      },\n      'notPrepared': {\n        method: 'POST',\n        params: {\n          action: 'orderNotPrepared'\n        }\n      }\n    });\n  }\n})();\n","(function() {\n  angular.module('app.resources')\n    .factory('orders', orders)\n\n  orders.$inject = [\n    '$resource'\n  ];\n\n  function orders($resource) {\n    return $resource('/operator/:action/:data', {}, {\n      'create': {\n        method: 'POST',\n        params: {\n          action: 'create'\n        }\n      },\n      'fetchAll': {\n        method: 'GET',\n        isArray: true,\n        params: {\n          action: 'getAll'\n        }\n      },\n      'makeInProgress': {\n        method: 'POST',\n        params: {\n          action: 'setOrderInProgress'\n        }\n      },\n      'close': {\n        method: 'POST',\n        params: {\n          action: 'closeOrder'\n        }\n      },\n      'decline': {\n        method: 'POST',\n        params: {\n          action: 'declineOrder'\n        }\n      },\n      'update': {\n        method: 'POST',\n        params: {\n          action: 'updateOrder'\n        }\n      },\n      'create': {\n        method: 'POST',\n        params: {\n          action: 'createOrder'\n        }\n      }\n    });\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.filters')\n    .filter('firstLetter', firstLetter);\n\n  function firstLetter() {\n    return firstLetterFilter;\n\n    ////////////////\n\n    function firstLetterFilter(item) {\n      return item.charAt(0).toUpperCase();\n    }\n  }\n\n})();\n\n","(function() {\n  angular.module('app.services')\n    .factory('apiInterceptor', ($rootScope, $q, ENV, exception) => {\n      return {\n        request: (config) => {\n          config.uri = config.url;\n\n          // Если запрос идет не к html/, то добавляем base url\n          if (config.url.indexOf('html/', 0) == -1) {\n            config.url = ENV.apiUrl + config.url\n          }\n\n          return config;\n        },\n        requestError: (request) => {\n          return $q.reject(request);\n        },\n        responseError: (response) => {\n          if (response.status === 401 || response.status === 403) {\n            exception.catcher(`Помилка входу в систему`)(response);\n          } else {\n            exception.catcher(`XHR помилка для ${response.config.uri}`)(response);\n          }\n\n          return $q.reject(response);\n        }\n      };\n    })\n})();","(function() {\n    angular.module('app.services')\n        .factory('storage', storage)\n\n    /**\n     * @ngdoc service\n     * @name storage\n     * @module app.services\n     *\n     * @description\n     * Более удобная обертка над внешним сервисом localStorageService\n     */\n\n    storage.$inject = [\n        'localStorageService'\n    ];\n\n    function storage(localStorageService) {\n        return {\n            set: function(key, value) {\n                localStorageService.set(key, value);\n            },\n            get: function(key, defaultValue) {\n                return localStorageService.get(key) || defaultValue;\n            },\n            remove: function(key) {\n                localStorageService.remove(key);\n            },\n            setObject: function(key, value) {\n                localStorageService.set(key, JSON.stringify(value));\n            },\n            getObject: function(key) {\n                return JSON.parse(localStorageService.get(key)) || {};\n            },\n            getArray: function(key) {\n                return JSON.parse(localStorageService.get(key)) || [];\n            }\n        }\n    }\n})();","(function() {\n  angular.module('app.services')\n    .factory('user', user)\n\n  /**\n   * @ngdoc service\n   * @name user\n   * @module app.services\n   *\n   * @description\n   * Сервис который отвечает за авторизацию пользователей\n   */\n\n  user.$inject = [\n    '$q',\n    '$rootScope',\n    'APP_EVENTS',\n    'USER_ROLES',\n    '$location',\n    'jwtHelper',\n    'helpers',\n    'auth',\n    'storage'\n  ];\n\n  function user(\n    $q,\n    $rootScope,\n    APP_EVENTS,\n    USER_ROLES,\n    $location,\n    jwtHelper,\n    helpers,\n    auth,\n    storage\n  ) {\n    let isAuthenticated = false;\n    let service         = {\n      login: login,\n      logout: logout,\n      info: getInfo,\n      roles: getRoles,\n      isAdmin: isAdmin,\n      isManager: isManager,\n      isKitchen: isKitchen,\n      isAuth() {\n        return isAuthenticated;\n      }\n    };\n\n    isAuth();\n\n    return service;\n\n    ////////////////\n\n    function isAuth() {\n      let token = storage.get('token');\n\n      if (token) {\n        isAuthenticated = true;\n      } else {\n        isAuthenticated = false;\n      }\n    }\n\n    function login(form) {\n      var deferred = $q.defer();\n\n      auth.login(form, response => {\n        if (exceptCourier(response.token)) {\n          storage.set('token', response.token);\n          isAuthenticated = true;\n          $rootScope.$broadcast(APP_EVENTS.userLogin);\n\n          deferred.resolve(response);\n        } else {\n          deferred.reject();\n        }\n      }, error => {\n        deferred.reject(error);\n      });\n\n      return deferred.promise;\n    }\n\n    function logout() {\n      isAuthenticated = false;\n      storage.remove('token');\n\n      $location.path('/auth');\n    }\n\n    function getInfo() {\n      let token = storage.get('token');\n\n      if (token) {\n        return jwtHelper.decodeToken(token);\n      }\n    }\n\n    function getRoles() {\n      let info   = getInfo();\n      let result = [];\n\n      if (info) {\n        info.userRoles.forEach((role) => {\n          result.push(role.name);\n        });\n      } else {\n        result.push(USER_ROLES.guest);\n      }\n\n      return result;\n    }\n\n    function isAdmin() {\n      return isRole(USER_ROLES.admin);\n    }\n\n    function isManager() {\n      return isRole(USER_ROLES.manager);\n    }\n\n    function isKitchen() {\n      return isRole(USER_ROLES.kitchen);\n    }\n\n    function isRole(role) {\n      let roles  = getRoles();\n      let result = false;\n\n      if (roles) {\n        if (helpers.findString(roles, role)) {\n          result = true;\n        }\n      }\n\n      return result;\n    }\n\n    function exceptCourier(token) {\n      let info   = jwtHelper.decodeToken(token);\n      let result = true;\n\n      info.userRoles.forEach(role => {\n        if (role.name === 'ROLE_COURIER') {\n          result = false;\n        }\n      });\n\n      return result;\n    }\n  }\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals')\n    .factory('BaseModal', BaseModal)\n\n  BaseModal.$inject = ['user'];\n\n  function BaseModal(user) {\n    let cache = [];\n\n    class BaseModalClass {\n      /**\n       * Базовый класс для модальных окон\n       * @param name\n       * @param events\n       * @description содержит публичные свойства events, scope. Scope используется\n       * для передачи в контроллер модального окна данных из внешнего scope.\n       */\n\n      constructor(name, events) {\n        this._subscribers = {};\n\n        this.events = events || {};\n        this.scope  = {};\n\n        cache.push({\n          [name]: this\n        });\n      }\n\n      /**\n       * Подписка на события в модальном окне\n       * @param {String} eventName\n       * @param {Function} cb\n       */\n\n      on(eventName, cb) {\n        this._subscribers[eventName] = cb;\n      }\n\n      /**\n       * Вызов всех подписчиков на переданное событие\n       * @param {String} eventName\n       * @param {Array} args\n       */\n\n      emit(eventName, ...args) {\n        let sub = this._subscribers[eventName];\n        sub.apply(sub, args);\n      }\n\n      /**\n       * Возврат модального окна из кеша если есть\n       * @param {String} name\n       * @returns {Object}\n       */\n\n      static get(name) {\n        let result = {};\n\n        cache.forEach(modal => {\n          if (modal[name]) {\n            result = modal[name];\n          }\n        });\n\n        return result;\n      }\n\n      static getClassName() {\n        return (user.isManager()) ? 'manager-modal' : '';\n      }\n    }\n\n    return BaseModalClass;\n  }\n})();","(function() {\n  angular.module('app.core')\n    .factory('common', common)\n\n  common.$inject = [\n    '$q',\n    '$rootScope',\n    '$timeout',\n  ];\n\n  function common(\n    $q,\n    $rootScope,\n    $timeout\n  ) {\n    let service = {\n      $broadcast: $broadcast,\n      $emit: $emit,\n      $q: $q,\n      $timeout: $timeout\n    };\n\n    return service;\n\n    function $broadcast() {\n      return $rootScope.$broadcast.apply($rootScope, arguments);\n    }\n\n    function $emit() {\n      return $rootScope.$emit.apply($rootScope, arguments);\n    }\n  }\n})();","(function() {\n  'use strict';\n\n  /**\n   * @description\n   * Основная конфигурация приложения\n   */\n\n  var core = angular.module('app.core');\n\n  var config = {\n    appErrorPrefix: '[YOKI-CRM Error] ',\n    appTitle: 'YOKI CRM',\n    version: '1.0.0'\n  };\n\n  core.value('config', config);\n\n  core.config(toastrConfig);\n  core.config(configure);\n  core.config(attachAuthToken);\n\n  core.run(defaultRoute);\n  core.run(secureRoutes);\n\n  /* @ngInject */\n  function toastrConfig(toastr) {\n    toastr.options.timeOut       = 3000;\n    toastr.options.positionClass = 'toast-bottom-right';\n  }\n\n  configure.$inject = [\n    '$logProvider',\n    '$routeProvider',\n    'routehelperConfigProvider',\n    'exceptionHandlerProvider'\n  ];\n\n  function configure(\n    $logProvider,\n    $routeProvider,\n    routehelperConfigProvider,\n    exceptionHandlerProvider\n  ) {\n    // turn debugging off/on (no info or warn)\n    if ($logProvider.debugEnabled) {\n      $logProvider.debugEnabled(true);\n    }\n\n    // Configure the common route provider\n    routehelperConfigProvider.config.$routeProvider = $routeProvider;\n    var resolveAlways                               = {\n      /* @ngInject */\n      ready: function(dataservice) {\n        return dataservice.ready();\n      }\n    };\n\n    routehelperConfigProvider.config.resolveAlways = resolveAlways;\n\n    // Configure the common exception handler\n    exceptionHandlerProvider.configure(config.appErrorPrefix);\n  }\n\n  defaultRoute.$inject = [\n    '$rootScope',\n    '$route',\n    'user'\n  ];\n\n  function defaultRoute(\n    $rootScope,\n    $route,\n    user\n  ) {\n    $rootScope.$on('$locationChangeStart', (event) => {\n      let route = ($route.routes[$rootScope.location.path()]);\n\n      // Если не найден роут, значит вычисляем $routeProvider.otherwise\n      if (!route) {\n        event.preventDefault();\n\n        if (!user.isAuth()) {\n          $rootScope.go('/auth');\n        } else {\n          $rootScope.defaultRedirect();\n        }\n      }\n    });\n  }\n\n  secureRoutes.$inject = [\n    '$rootScope',\n    '$route',\n    'user',\n    'helpers',\n    'logger'\n  ];\n\n  function secureRoutes(\n    $rootScope,\n    $route,\n    user,\n    helpers,\n    logger\n  ) {\n    // Запрещаем прямой доступ к защищенным урлам\n    $rootScope.$on('$locationChangeStart', (event) => {\n      let route = ($route.routes[$rootScope.location.path()]);\n\n      if ((route.data) && (route.data.authorities)) {\n        let access = false;\n\n        route.data.authorities.forEach((role) => {\n          if (helpers.findString(user.roles(), role)) {\n            access = true;\n          }\n        });\n\n        if (!access) {\n          event.preventDefault();\n          $rootScope.defaultRedirect();\n          logger.error('Помилка доступу');\n        }\n      }\n    });\n  }\n\n  attachAuthToken.$inject = [\n    'ENV',\n    '$httpProvider',\n    'jwtInterceptorProvider'\n  ];\n\n  function attachAuthToken(\n    ENV,\n    $httpProvider,\n    jwtInterceptorProvider\n  ) {\n    jwtInterceptorProvider.tokenGetter = [\n      'jwtHelper',\n      '$http',\n      'user',\n      'storage',\n      '$location',\n      function(jwtHelper, $http, user, storage, $location) {\n        var token = storage.get('token');\n\n        if (angular.isDefined(token)) {\n          if (jwtHelper.isTokenExpired(token)) {\n            return $http({\n              url: ENV.apiUrl + '/auth/refresh',\n              skipAuthorization: false,\n              method: 'POST',\n              headers: {\n                Authorization: 'Bearer ' + token\n              }\n            }).then(function(response) {\n              var newToken = response.data.token;\n\n              storage.set('token', newToken);\n              return newToken;\n            }, function() {\n              user.logout();\n            });\n          } else {\n            return token;\n          }\n        }\n      }];\n\n    $httpProvider.interceptors.push('jwtInterceptor');\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.core')\n    .constant('ENV', {\n      \"apiUrl\": 'http://46.101.230.74:8080'\n    })\n    .constant('APP_EVENTS', {\n      serverError: 'server-error',\n      userLogin: 'user-enter',\n      userLogout: 'user-logout',\n      refreshPage: 'refresh-page',\n      refreshPageDone: 'refresh-page-done'\n    })\n    .constant('USER_ROLES', {\n      admin: 'ROLE_ADMINISTRATOR',\n      manager: 'ROLE_OPERATOR',\n      kitchen: 'ROLE_KITCHEN',\n      guest: 'ROLE_GUEST'\n    })\n    .constant('toastr', toastr)\n    .constant('moment', moment)\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.core')\n    .factory('dataservice', dataservice);\n\n  dataservice.$inject = [\n    '$q',\n    'exception',\n  ];\n\n  /* @ngInject */\n  function dataservice(\n    $q,\n    exception\n  ) {\n    var isPrimed = false;\n    var primePromise;\n\n    var service = {\n      ready: ready\n    };\n\n    return service;\n\n    function prime() {\n      // This function can only be called once.\n      if (primePromise) {\n        return primePromise;\n      }\n\n      primePromise = $q.when(true).then(success);\n      return primePromise;\n\n      function success() {\n        isPrimed = true;\n      }\n    }\n\n    function ready(nextPromises) {\n      var readyPromise = primePromise || prime();\n\n      return readyPromise\n        .then(function() {\n          return $q.all(nextPromises);\n        })\n        .catch(exception.catcher('\"ready\" function failed'));\n    }\n  }\n})();\n","// Include in index.html so that app level exceptions are handled.\n// Exclude from testRunner.html which should run exactly what it wants to run\n(function() {\n  'use strict';\n\n  angular\n    .module('blocks.exception')\n    .provider('exceptionHandler', exceptionHandlerProvider)\n    .config(config);\n\n  /**\n   * Must configure the exception handling\n   * @return {[type]}\n   */\n  function exceptionHandlerProvider() {\n    /* jshint validthis:true */\n    this.config = {\n      appErrorPrefix: undefined\n    };\n\n    this.configure = function(appErrorPrefix) {\n      this.config.appErrorPrefix = appErrorPrefix;\n    };\n\n    this.$get = function() {\n      return {config: this.config};\n    };\n  }\n\n  /**\n   * Configure by setting an optional string value for appErrorPrefix.\n   * Accessible via config.appErrorPrefix (via config value).\n   * @param  {[type]} $provide\n   * @return {[type]}\n   * @ngInject\n   */\n  function config($provide) {\n    $provide.decorator('$exceptionHandler', extendExceptionHandler);\n  }\n\n  /**\n   * Extend the $exceptionHandler service to also display a toast.\n   * @param  {Object} $delegate\n   * @param  {Object} exceptionHandler\n   * @param  {Object} logger\n   * @return {Function} the decorated $exceptionHandler service\n   */\n  function extendExceptionHandler($delegate, exceptionHandler, logger) {\n    return function(exception, cause) {\n      var appErrorPrefix = exceptionHandler.config.appErrorPrefix || '';\n      var errorData      = {exception: exception, cause: cause};\n      exception.message  = appErrorPrefix + exception.message;\n      $delegate(exception, cause);\n      /**\n       * Could add the error to a service's collection,\n       * add errors to $rootScope, log errors to remote web server,\n       * or log locally. Or throw hard. It is entirely up to you.\n       * throw exception;\n       *\n       * @example\n       *     throw { message: 'error message we added' };\n       */\n      logger.error(exception.message, errorData);\n    };\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('blocks.exception')\n    .factory('exception', exception);\n\n  /* @ngInject */\n  function exception(logger) {\n    var service = {\n      catcher: catcher\n    };\n    \n    return service;\n\n    function catcher(message) {\n      return function(reason) {\n        logger.error(message, reason);\n      };\n    }\n  }\n})();","(function() {\n  angular.module('blocks.helpers', [])\n    .factory('helpers', helpers)\n\n  helpers.$inject = [\n    '$filter'\n  ];\n\n  function helpers($filter) {\n\n    var service = {};\n\n    /**\n     * Возвращает новый массив разделенные на ряды, в каждом ряду будет sizeColumn колонок\n     * Helpers.shapeArrayInRows([0,1,2,3], 3) => [[0,1,2],[3]]\n     * @param {Array} array\n     * @param {Integer} sizeColumn\n     * @returns {Array}\n     */\n\n    service.shapeArrayInRows = (array, sizeColumn) => {\n      var result = [];\n\n      for (var i = 0; i < array.length; i += sizeColumn) {\n        result.push(array.slice(i, i + sizeColumn));\n      }\n\n      return result;\n    }\n\n    /**\n     * Выполняет поиск в массиве data, по переданному объекту conditions.\n     * Пример объекта conditions = {key: value}\n     * @param {Array} data\n     * @param {Object} conditions\n     * @returns {Object|Undefined}\n     */\n\n    service.searchByKey = (data, conditions) => {\n      let keys = Object.keys(conditions);\n      let result;\n\n      data.forEach((row) => {\n        if (row[keys[0]] == conditions[keys[0]]) {\n          result = row;\n        }\n      });\n\n      return result;\n    }\n\n    service.searchIndex = (data, conditions) => {\n      let keys = Object.keys(conditions);\n      let index;\n\n      for (let i = 0; i < data.length; i++) {\n        if (data[i][keys[0]] == conditions[keys[0]]) {\n          index = i;\n        }\n      }\n\n      return index;\n    }\n\n    service.nextElementInArray = (data, conditions) => {\n      let keys = Object.keys(conditions);\n      let result;\n\n      data.forEach((row, i, array) => {\n        if (row[keys[0]] == conditions[keys[0]]) {\n          result = array[i + 1];\n        }\n      });\n\n      return result;\n    }\n\n    service.prevElementInArray = (data, conditions) => {\n      let keys = Object.keys(conditions);\n      let result;\n\n      data.forEach((row, i, array) => {\n        if (row[keys[0]] == conditions[keys[0]]) {\n          result = array[i - 1];\n        }\n      });\n\n      return result;\n    }\n\n    /**\n     * Ищет переданную строку в массиве из строк\n     * @param array\n     * @param string\n     * @returns {*}\n     */\n\n    service.findString = (array, string) => {\n      let result = false;\n\n      array.forEach((item) => {\n        if (item === string) {\n          result = item;\n        }\n      });\n\n      return result;\n    }\n\n    /**\n     * Сортировка сущностей по id в порядке убывания\n     * @param prev\n     * @param next\n     * @returns {number}\n     */\n\n    service.compareById = (prev, next) => {\n      if (prev.id > next.id) {\n        return -1;\n      }\n\n      if (prev.id < next.id) {\n        return 1;\n      }\n\n      return 0;\n    }\n\n    /**\n     * Фильтрация всех заказов по переданным статусам\n     * @param {Array} orders\n     * @param {Array} statuses\n     * @returns {Array}\n     */\n\n    service.filterOrdersByStatus = (orders, statuses) => {\n      let results = [];\n\n      orders.forEach((order) => {\n        if (service.findString(statuses, order.status)) {\n          results.push(order);\n        }\n      });\n\n      return results;\n    }\n\n    /**\n     * Подсчитывает сводную информацию о заказе\n     * @param order\n     * @returns {{price: number, count: number}}\n     */\n\n    service.calculateOrderInfo = (order) => {\n      let result = {\n        price: 0,\n        count: 0\n      };\n\n      for (let dish of order.dishes) {\n        result.price += dish.dish.price * dish.quantity;\n        result.count += dish.quantity;\n      }\n\n      return result;\n    }\n\n    /**\n     * Получает текущую дату и возвращает объект\n     * @returns {{yyyy: number, mm: number, dd: number}}\n     */\n\n    service.getDate = () => {\n      let today = new Date();\n      let dd    = today.getDate();\n      let mm    = today.getMonth() + 1;\n      let yyyy  = today.getFullYear();\n\n      if (dd < 10) {\n        dd = '0' + dd\n      }\n\n      if (mm < 10) {\n        mm = '0' + mm\n      }\n\n      let str = `${yyyy}-${mm}-${dd}`;\n\n      return {\n        yyyy,\n        mm,\n        dd,\n        str\n      }\n    }\n\n    /**\n     * Делит строку вида 23:59 и возвращает объект\n     * @param str\n     * @returns {{hours: string, minutes: string}}\n     */\n\n    service.getHourMinutes = (str) => {\n      if (str) {\n        return {\n          hours: str.substr(0, 2),\n          minutes: str.substr(2, 4)\n        }\n      }\n    }\n\n    /**\n     * Возвращает из timestamp строку из 4 цифр HHmm\n     * @param date\n     * @returns {string}\n     */\n\n    service.parseDate = (date) => {\n      let hhmm = $filter('date')(date, 'HHmm');\n      let foo  = service.getHourMinutes(hhmm);\n\n      return `${foo.hours}${foo.minutes}`;\n    }\n\n    return service;\n  }\n})();\n","(function() {\n    'use strict';\n\n    angular\n        .module('blocks.logger')\n        .factory('logger', logger);\n\n    logger.$inject = ['$log', 'toastr'];\n\n    function logger($log, toastr) {\n        var service = {\n            showToasts: true,\n\n            error   : error,\n            info    : info,\n            success : success,\n            warning : warning,\n\n            // straight to console; bypass toastr\n            log     : $log.log\n        };\n\n        return service;\n        /////////////////////\n\n        function error(message, data, title) {\n            toastr.error(message, title);\n            $log.error('Error: ' + message, data);\n        }\n\n        function info(message, data, title) {\n            toastr.info(message, title);\n            $log.info('Info: ' + message, data);\n        }\n\n        function success(message, data, title) {\n            toastr.success(message, title);\n            $log.info('Success: ' + message, data);\n        }\n\n        function warning(message, data, title) {\n            toastr.warning(message, title);\n            $log.warn('Warning: ' + message, data);\n        }\n    }\n}());\n","(function() {\n  'use strict';\n\n  angular\n    .module('blocks.edit-field', [])\n    .directive('editField', editField)\n\n  editField.$inject = [\n    'toastr',\n    '$timeout'\n  ];\n\n  function editField(toastr, $timeout) {\n    return {\n      restrict: 'E',\n      replace: true,\n      transclude: true,\n      scope: {\n        placeholder: '@',\n        required: '@',\n        mask: '@'\n      },\n      require: 'ngModel',\n      templateUrl: 'html/blocks/edit-field/edit-field.html',\n      link: function(scope, element, attrs, ngModel) {\n        scope.editMode = false;\n\n        scope.editModeOn = () => {\n          let input;\n          let query;\n\n          if (scope.mask) {\n            query = element[0].getElementsByClassName('edit-field-input-mask');\n          } else {\n            query = element[0].getElementsByClassName('edit-field-input');\n          }\n\n          $timeout(() => {\n            input = angular.element(query);\n            input[0].focus();\n          }, 100);\n\n          scope.fieldData = ngModel.$viewValue;\n          scope.editMode  = true;\n        }\n\n        scope.editModeOff = () => {\n          scope.fieldData = ngModel.$viewValue;\n          scope.editMode  = false;\n        }\n\n        scope.editSave = () => {\n          if (!(scope.fieldData) && (scope.required)) {\n            toastr.error('Поле не повинно бути порожнім!');\n          } else {\n            ngModel.$setViewValue(scope.fieldData);\n            ngModel.$render();\n            scope.editModeOff();\n          }\n        }\n\n        let queryResult  = element[0].getElementsByClassName('field-data-value');\n        let spanElements = angular.element(queryResult);\n\n        spanElements.bind('click', () => {\n          scope.$apply(function() {\n            scope.editModeOn();\n          });\n\n          event.preventDefault();\n        });\n\n        element.bind('keydown keypress', (event) => {\n          if (event.which === 13) {\n            scope.$apply(function() {\n              scope.editSave();\n            });\n\n            event.preventDefault();\n          }\n        });\n\n        ngModel.$render = function() {\n          scope.fieldData = ngModel.$viewValue;\n        };\n\n        ngModel.$render();\n      }\n    }\n  }\n\n})();","(function() {\n  angular.module('blocks.dish-switch')\n    .directive('dishSwitch', dishSwitch)\n\n  dishSwitch.$inject = ['dishes', 'toastr'];\n\n  function dishSwitch(dishes, toastr) {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {},\n      require: 'ngModel',\n      templateUrl: 'html/blocks/dish-switch/dish-switch.html',\n      link: (scope, element, attr, ngModel) => {\n        scope.knobLabel = '\\u00a0';\n\n        element.on('click', () => {\n          scope.$apply(() => {\n            scope.dish.enabled = !scope.dish.enabled;\n            ngModel.$setViewValue(scope.dish);\n            ngModel.$render();\n\n            if (scope.dish.enabled === true) {\n              dishes.activate({\n                id: scope.dish.id\n              });\n            } else {\n              dishes.deactivate({\n                id: scope.dish.id\n              });\n            }\n          });\n        });\n\n        ngModel.$render = function() {\n          scope.dish = ngModel.$viewValue;\n        };\n\n        ngModel.$render();\n      }\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('blocks.image-upload', [])\n    .directive('imageUpload', imageUpload)\n\n  imageUpload.$inject = [\n    'toastr',\n    '$q'\n  ];\n\n  function imageUpload(\n    toastr,\n    $q\n  ) {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {},\n      require: 'ngModel',\n      templateUrl: 'html/blocks/image-upload/image-upload.html',\n      link: function(scope, element, attrs, ngModel) {\n        scope.uploaded    = false;\n        scope.imagesDish  = [];\n        scope.removeImage = removeImage;\n\n        // ngModel.$render = function() {\n        //   // Если указаны изображения (форма редактирования)\n        //   if (ngModel.$viewValue.length) {\n        //     scope.uploaded   = true;\n        //     scope.imagesDish = ngModel.$viewValue;\n        //     ngModel.$setValidity('required', true);\n        //   } else {\n        //     ngModel.$setValidity('required', false);\n        //   }\n        // };\n        //\n        // ngModel.$render();\n\n        // scope.$watch(function() {\n        //   return ngModel.$modelValue;\n        // }, function(newValue) {\n        //   // Если указаны изображения (форма редактирования)\n        //   if (newValue.length) {\n        //     scope.uploaded   = true;\n        //     scope.imagesDish = ngModel.$viewValue;\n        //   }\n        //\n        //   ngModel.$render();\n        // });\n\n        let input = element.find('input');\n        let opts  = {\n          max_filesize: 2 * 1024 * 1024,\n          types: ['image/png', 'image/jpg', 'image/jpeg']\n        };\n\n        ////////////////\n\n        input.on('change', function(changeEvent) {\n          let files = [];\n\n          angular.forEach(changeEvent.target.files, file => {\n            files.push(file);\n          });\n\n          let validator = validate(files);\n\n          if (validator.status) {\n            $q.all([uploadBinary(files)]).then(binaries => {\n              scope.imagesDish = binaries[0];\n              scope.uploaded   = true;\n\n              ngModel.$setViewValue(files);\n              ngModel.$setValidity('arrayRequired', true);\n              // toastr.success('Изображения загружены');\n            });\n          } else {\n            printError(validator);\n          }\n        });\n\n        function uploadBinary(files) {\n          var deferred      = $q.defer();\n          let countUploaded = 0;\n          let result        = [];\n\n          for (let i = 0; i < files.length; i++) {\n            let dataURL = new FileReader();\n\n            dataURL.onload = (readerEvt) => {\n              countUploaded++;\n\n              result.push(btoa(readerEvt.target.result));\n\n              if (countUploaded === files.length) {\n                deferred.resolve(result);\n              }\n            };\n\n            dataURL.readAsBinaryString(files[i]);\n          }\n\n          return deferred.promise;\n        }\n\n        function removeImage(image) {\n          scope.imagesDish.splice(scope.imagesDish.indexOf(image), 1);\n\n          if (!scope.imagesDish.length) {\n            scope.uploaded = false;\n            ngModel.$setValidity('arrayRequired', false);\n          }\n\n          ngModel.$setViewValue(scope.imagesDish);\n        }\n\n        function validate(files) {\n          let valid = {\n            status: true,\n            reason: null\n          };\n\n          for (let i = 0; i < files.length; i++) {\n            if (files[i].size > opts.max_filesize) {\n              valid.status = false;\n              valid.reason = 'max_filesize'\n            }\n\n            if (opts.types.indexOf(files[i].type) === -1) {\n              valid.status = false;\n              valid.reason = 'format'\n            }\n          }\n\n          return valid;\n        }\n\n        function printError(validate) {\n          let errorMsg = '';\n\n          switch (validate.reason) {\n            case 'max_filesize':\n              errorMsg = 'Максимальний розмір файла 2Мб';\n              break;\n            case 'format':\n              errorMsg = 'Заборонений тип файлу';\n              break;\n          }\n\n          toastr.error(errorMsg);\n        }\n      }\n    }\n  }\n})();","(function() {\n  angular.module('blocks.splash')\n    .directive('splashScreen', splashScreen)\n    .factory('splash', splash)\n\n  splash.$inject = [\n    'common',\n    '$rootScope'\n  ];\n\n  function splash(common, $rootScope) {\n    let service = {\n      show: showScreen,\n      hide: hideScreen,\n      delay: delayScreen\n    };\n\n    return service;\n\n    /**\n     * Запускает splash во время выполнения промисов\n     * @param {Array} promise\n     */\n\n    function showScreen(promise) {\n      $rootScope.splashScreen = true;\n\n      common.$q.all(promise).then(() => {\n        common.$timeout(() => {\n          $rootScope.splashScreen = false;\n        }, 600);\n      });\n    }\n\n    function hideScreen() {\n      common.$timeout(() => {\n        $rootScope.splashScreen = false;\n      }, 600);\n    }\n    \n    function delayScreen(delay) {\n      $rootScope.splashScreen = true;\n      \n      common.$timeout(() => {\n        $rootScope.splashScreen = false;\n      }, delay);\n    }\n  }\n\n  function splashScreen() {\n    return {\n      restrict: 'E',\n      replace: true,\n      templateUrl: 'html/blocks/splash-screen/splash-screen.html'\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('blocks.refresh-btn')\n    .directive('refreshBtn', refreshBtn)\n\n  refreshBtn.$inject = [\n    'APP_EVENTS',\n    '$rootScope',\n    '$timeout'\n  ];\n\n  function refreshBtn(\n    APP_EVENTS,\n    $rootScope,\n    $timeout\n  ) {\n    return {\n      restrict: 'E',\n      replace: true,\n      scope: {},\n      templateUrl: 'html/blocks/refresh-btn/refresh-btn.html',\n      link: function(scope) {\n        scope.refreshPage    = immediatelyRefresh;\n        scope.refreshEnabled = false;\n\n        let timeout;\n\n        function immediatelyRefresh() {\n          if (!scope.refreshEnabled) {\n            $timeout.cancel(timeout);\n            refreshPage();\n          }\n        }\n\n        /**\n         * Кидает событие по всему приложению,\n         * событие перехватывают страницы на которых требуется\n         * обновление, типо real time, 2007 год.\n         */\n\n        function refreshPage() {\n          $rootScope.$broadcast(APP_EVENTS.refreshPage);\n          scope.refreshEnabled = true;\n        }\n\n        function startTimeout() {\n          timeout = $timeout(refreshPage, 20000);\n        }\n\n        // start\n        startTimeout();\n\n        var refreshListen = $rootScope.$on(APP_EVENTS.refreshPageDone, () => {\n          scope.refreshEnabled = false;\n          startTimeout();\n        });\n\n        scope.$on('$destroy', () => {\n          if (timeout) {\n            $timeout.cancel(timeout);\n          }\n        });\n\n        scope.$on('$destroy', refreshListen);\n      }\n    }\n  }\n\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('blocks.router')\n    .provider('routehelperConfig', routehelperConfig)\n    .factory('routehelper', routehelper);\n\n  routehelper.$inject = ['$location', '$rootScope', '$route', 'logger', 'routehelperConfig'];\n\n  // Must configure via the routehelperConfigProvider\n  function routehelperConfig() {\n    /* jshint validthis:true */\n    this.config = {};\n\n    this.$get = function() {\n      return {\n        config: this.config\n      };\n    };\n  }\n\n  function routehelper($location, $rootScope, $route, logger, routehelperConfig) {\n    var handlingRouteChangeError = false;\n\n    var routeCounts = {\n      errors: 0\n    };\n\n    var routes         = [];\n    var $routeProvider = routehelperConfig.config.$routeProvider;\n\n    var service = {\n      configureRoutes: configureRoutes,\n      getRoutes: getRoutes,\n      routeCounts: routeCounts\n    };\n\n    init();\n\n    return service;\n    ///////////////\n\n    function configureRoutes(routes) {\n      routes.forEach(function(route) {\n        route.config.resolve =\n          angular.extend(route.config.resolve || {}, routehelperConfig.config.resolveAlways);\n        $routeProvider.when(route.url, route.config);\n      });\n\n      $routeProvider.otherwise({redirectTo: '/auth'});\n    }\n\n    function handleRoutingErrors() {\n      // Route cancellation:\n      // On routing error, go to the dashboard.\n      // Provide an exit clause if it tries to do it twice.\n      $rootScope.$on('$routeChangeError',\n        function(event, current, previous, rejection) {\n          if (handlingRouteChangeError) {\n            return;\n          }\n          routeCounts.errors++;\n          handlingRouteChangeError = true;\n          var destination          = (current && (current.title || current.name || current.loadedTemplateUrl)) ||\n            'unknown target';\n          var msg                  = 'Error routing to ' + destination + '. ' + (rejection.msg || '');\n          logger.warning(msg, [current]);\n          $location.path('/');\n        }\n      );\n    }\n\n    function init() {\n      handleRoutingErrors();\n    }\n\n    function getRoutes() {\n      for (var prop in $route.routes) {\n        if ($route.routes.hasOwnProperty(prop)) {\n          var route   = $route.routes[prop];\n          var isRoute = !!route.title;\n          if (isRoute) {\n            routes.push(route);\n          }\n        }\n      }\n\n      return routes;\n    }\n  }\n})();\n","(function() {\n  angular.module('blocks.validator')\n    .directive('arrayRequired', arrayRequired)\n\n  arrayRequired.$inject = [];\n\n  function arrayRequired() {\n    return {\n      restrict: 'A',\n      require: 'ngModel',\n      link: function(scope, elm, attrs, ngModel) {\n\n        ngModel.$render = function() {\n          if (ngModel.$viewValue.length) {\n            ngModel.$setValidity('arrayRequired', true);\n          } else {\n            ngModel.$setValidity('arrayRequired', false);\n          }\n        }\n\n        ngModel.$render();\n      }\n    };\n  }\n})();\n\n","(function() {\n  angular.module('blocks.validator')\n    .factory('validator', validator)\n\n  validator.$inject = [];\n\n  function validator() {\n    let validators = {\n      required: required,\n      phone: phone\n    };\n\n    let service = {\n      run: runValidator\n    };\n\n    return service;\n\n    ////////////////\n\n    function runValidator(object, rules) {\n      let report = {\n        errors: []\n      };\n\n      rules.forEach(ruleObj => {\n        if (object.hasOwnProperty(ruleObj.field)) {\n          let value = object[ruleObj.field];\n\n          ruleObj.rules.forEach(rule => {\n            if (!validators[rule](value)) {\n              report.errors.push({\n                field: ruleObj.field,\n                rule: rule\n              });\n            }\n          });\n        }\n      });\n\n      return report;\n    }\n\n    function required(field) {\n      let result = false;\n      \n      if (Array.isArray(field)) {\n        if (field.length) {\n          result = true;\n        }\n      } else {\n        if (field) {\n          result = true;\n        }\n      }\n\n      return result;\n    }\n\n    function phone(field) {\n      let result = false;\n      \n      if (field.length === 10) {\n        result = true;\n      }\n\n      return result;\n    }\n  }\n})();\n\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals')\n    .factory('categoriesCreateModal', createCategory)\n    .controller('categoriesCreateModalCtrl', createCategoryCtrl);\n\n  createCategory.$inject = [\n    'ngDialog',\n    'BaseModal'\n  ];\n\n  /* @ngInject */\n  function createCategory(\n    ngDialog,\n    BaseModal\n  ) {\n    // Events that emit controller\n    let events = {\n      create: 'create'\n    };\n\n    let modal   = new BaseModal('createModal', events);\n    let service = angular.extend(modal, {\n      show: showModal,\n      hide: hideModal\n    });\n\n    return service;\n\n    ////////////////\n\n    function showModal() {\n      ngDialog.open({\n        template: 'html/modals/categories/categories.html',\n        width: '30%',\n        showClose: false,\n        controller: 'categoriesCreateModalCtrl',\n        controllerAs: 'vm'\n      });\n    }\n\n    function hideModal() {\n      ngDialog.close();\n    }\n  }\n\n  createCategoryCtrl.$inject = [\n    'categories',\n    'BaseModal',\n    'toastr'\n  ];\n\n  function createCategoryCtrl(\n    categories,\n    BaseModal,\n    toastr\n  ) {\n    let vm    = this;\n    let modal = BaseModal.get('createModal');\n\n    vm.create = createCategory;\n    vm.form   = {\n      name: ''\n    };\n\n    ////////////////\n\n    function createCategory() {\n      categories.create(vm.form, () => {\n        modal.hide();\n        toastr.success('Категорія добавлена');\n\n        modal.emit(modal.events.create);\n      });\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals')\n    .factory('dishesCreateModal', createDish)\n    .controller('dishesCreateModalCtrl', createDishCtrl);\n\n  createDish.$inject = [\n    'ngDialog',\n    'BaseModal'\n  ];\n\n  /* @ngInject */\n  function createDish(\n    ngDialog,\n    BaseModal\n  ) {\n    // Events that emit controller\n    let events = {\n      create: 'create'\n    };\n\n    let modal   = new BaseModal('dishesCreateModal', events);\n    let service = angular.extend(modal, {\n      show: showModal,\n      hide: hideModal\n    });\n\n    return service;\n\n    ////////////////\n\n    function showModal() {\n      ngDialog.open({\n        template: 'html/modals/dishes/create.html',\n        width: '60%',\n        showClose: false,\n        controller: 'dishesCreateModalCtrl',\n        controllerAs: 'vm'\n      });\n    }\n\n    function hideModal() {\n      ngDialog.close();\n    }\n  }\n\n  createDishCtrl.$inject = [\n    'dishes',\n    'images',\n    'BaseModal',\n    'toastr'\n  ];\n\n  function createDishCtrl(\n    dishes,\n    images,\n    BaseModal,\n    toastr\n  ) {\n    let vm    = this;\n    let modal = BaseModal.get('dishesCreateModal');\n\n    vm.create  = createDish;\n    vm.spinner = false;\n    vm.form    = {\n      images: [],\n      name: '',\n      price: '',\n      description: '',\n      type: 'ORDINARY',\n      categoryId: modal.scope.selectedCategory.id\n    };\n\n    vm.types = [{\n      name: 'Звичайний',\n      value: 'ORDINARY'\n    }, {\n      name: 'Новинка',\n      value: 'LATEST'\n    }, {\n      name: 'Гостра страва',\n      value: 'HOT'\n    }, {\n      name: 'Вегетаріанська страва',\n      value: 'VEGAN'\n    }];\n\n    ////////////////\n\n    function createDish() {\n      vm.spinner = true;\n      console.log(vm.form);\n\n      dishes.create(vm.form, created => {\n        let fd = new FormData();\n        fd.append('id', created.id);\n        fd.append('type', 'dish');\n\n        vm.form.images.forEach(image => {\n          console.log(image);\n          fd.append('images[]', image);\n        });\n\n        images.upload(fd, () => {\n          vm.spinner = false;\n\n          modal.hide();\n          toastr.success('Страву добавлена');\n\n          modal.emit(modal.events.create);\n        });\n      });\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals')\n    .factory('dishesEditModal', editDish)\n    .controller('dishesEditModalCtrl', dishesEditModalCtrl);\n\n  editDish.$inject = [\n    'ngDialog',\n    'BaseModal'\n  ];\n\n  /* @ngInject */\n  function editDish(\n    ngDialog,\n    BaseModal\n  ) {\n    // Events that emit controller\n    let events = {\n      update: 'update'\n    };\n\n    let modal   = new BaseModal('dishesEditModal', events);\n    let service = angular.extend(modal, {\n      show: showModal,\n      hide: hideModal\n    });\n\n    return service;\n\n    ////////////////\n\n    function showModal() {\n      ngDialog.open({\n        template: 'html/modals/dishes/edit.html',\n        width: '60%',\n        showClose: false,\n        controller: 'dishesEditModalCtrl',\n        controllerAs: 'vm'\n      });\n    }\n\n    function hideModal() {\n      ngDialog.close();\n    }\n  }\n\n  dishesEditModalCtrl.$inject = [\n    'dishes',\n    'images',\n    'BaseModal',\n    'toastr'\n  ];\n\n  function dishesEditModalCtrl(\n    dishes,\n    images,\n    BaseModal,\n    toastr\n  ) {\n    let vm    = this;\n    let modal = BaseModal.get('dishesEditModal');\n\n    vm.update  = updateDish;\n    vm.spinner = false;\n    vm.form    = {\n      images: [],\n      id: modal.scope.id,\n      name: modal.scope.name,\n      price: modal.scope.price,\n      description: modal.scope.description,\n      type: modal.scope.type,\n      categoryId: modal.scope.categoryId\n    };\n\n    vm.types = [{\n      name: 'Звичайний',\n      value: 'ORDINARY'\n    }, {\n      name: 'Новинка',\n      value: 'LATEST'\n    }, {\n      name: 'Гостра страва',\n      value: 'HOT'\n    }, {\n      name: 'Вегетаріанська страва',\n      value: 'VEGAN'\n    }];\n\n    ////////////////\n\n    activate();\n\n    /**\n     * Загружает изображения блюда\n     */\n\n    function activate() {\n      vm.spinner = true;\n\n      let obj = {\n        dishId: modal.scope.id,\n        links: []\n      };\n\n      modal.scope.images.forEach(image => {\n        obj.links.push(image.link);\n      });\n\n      images.fetchAll([obj], images => {\n        vm.spinner     = false;\n        vm.form.images = images[0].images;\n      });\n    }\n\n    function updateDish() {\n      vm.spinner = true;\n      dishes.update(vm.form, updateDish => {\n        vm.spinner = false;\n\n        modal.hide();\n        toastr.success('Страву обновлено');\n\n        modal.emit(modal.events.update, updateDish);\n      }, () => {\n        vm.spinner = false;\n      });\n    }\n  }\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals')\n    .factory('dishesSelectModal', selectDish)\n    .controller('dishesSelectModalCtrl', selectDishCtrl);\n\n  selectDish.$inject = [\n    'ngDialog',\n    'BaseModal'\n  ];\n\n  /* @ngInject */\n  function selectDish(\n    ngDialog,\n    BaseModal\n  ) {\n    // Events that emit controller\n    let events = {\n      selected: 'selected'\n    };\n\n    let modal   = new BaseModal('dishesSelectModal', events);\n    let service = angular.extend(modal, {\n      show: showModal,\n      hide: hideModal\n    });\n\n    return service;\n\n    ////////////////\n\n    function showModal() {\n      ngDialog.open({\n        template: 'html/modals/dishes/select.html',\n        showClose: false,\n        appendClassName: BaseModal.getClassName() + ' select-modal',\n        controller: 'dishesSelectModalCtrl',\n        controllerAs: 'vm'\n      });\n    }\n\n    function hideModal() {\n      // TODO грязный хак, dishesSelectModal вызывается поверх другого\n      // модального окна\n      let dialogs = ngDialog.getOpenDialogs();\n      ngDialog.close(dialogs[1]);\n    }\n  }\n\n  selectDishCtrl.$inject = [\n    '$timeout',\n    'categories',\n    'helpers',\n    '$q',\n    'BaseModal'\n  ];\n\n  function selectDishCtrl(\n    $timeout,\n    categories,\n    helpers,\n    $q,\n    BaseModal\n  ) {\n    let vm    = this;\n    let modal = BaseModal.get('dishesSelectModal');\n\n    vm.spinner     = true;\n    vm.searchDish  = searchDish;\n    vm.loadDishes  = loadDishes;\n    vm.incQuantity = incQuantity;\n    vm.decQuantity = decQuantity;\n    vm.pushDishes  = pushDishes;\n\n    vm.listOfDishes = modal.scope.dishes;\n    vm.categories   = [];\n    vm.dishes       = [];\n    vm.selectedCategory;\n\n    $q.all([activate()]).then(() => {\n      hideSpinner();\n    });\n\n    ////////////////\n\n    function activate() {\n      return categories.fetchAll().$promise\n        .then(categories => {\n          vm.categories = categories;\n          return categories[0];\n        }).then(firstCategory => {\n          return categories.fetchDishes({\n            id: firstCategory.id\n          }).$promise.then(dishes => {\n            vm.selectedCategory = firstCategory;\n            vm.dishes           = transformDishesData(dishes);\n          });\n        });\n    }\n\n    function loadDishes(category) {\n      vm.spinner = true;\n\n      categories.fetchDishes({\n        id: category.id\n      }, dishes => {\n        vm.selectedCategory = category;\n        vm.dishes           = transformDishesData(dishes);\n\n        hideSpinner();\n      });\n    }\n\n    /**\n     * Увеличение кол-во блюда\n     * @param {Object} dish\n     */\n\n    function incQuantity(dish) {\n      // Пытаемся найти переданное блюдо в списке\n      let search = searchDish(dish);\n\n      if (search) {\n        search.quantity++;\n      } else {\n        dish.quantity = 1;\n\n        vm.listOfDishes.push(dish);\n      }\n    }\n\n    /**\n     * Уменьшение кол-во блюда\n     * @param {Object} dish\n     */\n\n    function decQuantity(dish) {\n      let search = searchDish(dish);\n\n      if (search) {\n        search.quantity--;\n\n        if (!search.quantity) {\n          vm.listOfDishes.splice(vm.listOfDishes.indexOf(search), 1);\n        }\n      }\n    }\n\n    function searchDish(dish) {\n      return helpers.searchByKey(vm.listOfDishes, {dishId: dish.dishId});\n    }\n\n    /**\n     * Отправляем список из выбранных блюд\n     */\n\n    function pushDishes() {\n      modal.emit(modal.events.selected, vm.listOfDishes);\n      modal.hide();\n    }\n\n    /**\n     * Трансформирование данных о блюдах от сервера в более удобный вид\n     */\n\n    function transformDishesData(dishes) {\n      return dishes.map(dish => {\n        return {\n          dish: dish,\n          dishId: dish.id,\n          quantity: 0\n        };\n      });\n    }\n\n    function hideSpinner() {\n      $timeout(() => {\n        vm.spinner = false;\n      }, 400);\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals')\n    .factory('managerOrderDetailMiniModal', orderDetail)\n    .controller('managerOrderDetailMiniCtrl', orderDetailCtrl);\n\n  orderDetail.$inject = [\n    'ngDialog',\n    'BaseModal'\n  ];\n\n  /* @ngInject */\n  function orderDetail(\n    ngDialog,\n    BaseModal\n  ) {\n    // Events that emit controller\n    let events = {\n      decline: 'decline'\n    };\n\n    let modal   = new BaseModal('managerOrderDetailMiniModal', events);\n    let service = angular.extend(modal, {\n      show: showModal,\n      hide: hideModal\n    });\n\n    return service;\n\n    ////////////////\n\n    function showModal() {\n      ngDialog.open({\n        template: 'html/modals/manager/order-detail-mini.html',\n        showClose: false,\n        appendClassName: BaseModal.getClassName() + ' order-detail',\n        controller: 'managerOrderDetailMiniCtrl',\n        controllerAs: 'vm'\n      });\n    }\n\n    function hideModal() {\n      ngDialog.close();\n    }\n  }\n\n  orderDetailCtrl.$inject = [\n    'BaseModal',\n    'helpers',\n    'toastr',\n    'orders'\n  ];\n\n  function orderDetailCtrl(\n    BaseModal,\n    helpers,\n    toastr,\n    orders\n  ) {\n    let vm    = this;\n    let modal = BaseModal.get('managerOrderDetailMiniModal');\n\n    vm.order            = modal.scope.order;\n    vm.closeMessage     = '';\n    vm.showCloseMessage = (vm.closeMessage) ? true : false;\n    vm.closeBtnMessage  = (vm.closeMessage) ? 'відмінити' : 'відміна замовлення';\n    vm.orderInfo        = helpers.calculateOrderInfo(vm.order);\n    \n    vm.showCloseOrderForm = showCloseOrderForm;\n    vm.hideCloseOrderForm = hideCloseOrderForm;\n\n    ////////////////\n\n    /**\n     * Показ формы отмены заказа\n     */\n\n    function showCloseOrderForm() {\n      if (vm.showCloseMessage == true) {\n        if (vm.closeMessage !== '') {\n          let data = {\n            id: vm.order.id,\n            message: vm.closeMessage,\n            status: 'DELIVERY_FAILED'\n          };\n\n          orders.decline(data, () => {\n            toastr.success('Замовлення закрите');\n          });\n\n          modal.emit(modal.events.decline, vm.order);\n          modal.hide();\n        } else {\n          toastr.error('Введіть причину відмови від замовлення');\n        }\n      }\n\n      vm.showCloseMessage = true;\n      vm.closeBtnMessage  = 'відмінити';\n    }\n\n    function hideCloseOrderForm() {\n      vm.showCloseMessage = false;\n      vm.closeBtnMessage  = 'відміна замовлення';\n    }\n  }\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals')\n    .factory('managerOrderDetailModal', orderDetail)\n    .controller('managerOrderDetailCtrl', orderDetailCtrl);\n\n  orderDetail.$inject = [\n    'ngDialog',\n    'BaseModal'\n  ];\n\n  /* @ngInject */\n  function orderDetail(\n    ngDialog,\n    BaseModal\n  ) {\n    // Events that emit controller\n    let events = {\n      update: 'update',\n      create: 'create',\n      decline: 'decline'\n    };\n\n    let modal   = new BaseModal('managerOrderDetailModal', events);\n    let service = angular.extend(modal, {\n      show: showModal,\n      hide: hideModal\n    });\n\n    return service;\n\n    ////////////////\n\n    function showModal() {\n      ngDialog.open({\n        template: 'html/modals/manager/order-detail.html',\n        showClose: false,\n        appendClassName: BaseModal.getClassName() + ' order-detail',\n        controller: 'managerOrderDetailCtrl',\n        controllerAs: 'vm'\n      });\n    }\n\n    function hideModal() {\n      ngDialog.close();\n    }\n  }\n\n  orderDetailCtrl.$inject = [\n    'BaseModal',\n    'dishesSelectModal',\n    'orderHistoryModal',\n    'admin',\n    'helpers',\n    'validator',\n    'toastr',\n    '$scope',\n    'orders'\n  ];\n\n  function orderDetailCtrl(\n    BaseModal,\n    selectModal,\n    historylModal,\n    admin,\n    helpers,\n    validator,\n    toastr,\n    $scope,\n    orders\n  ) {\n    let vm          = this;\n    let modal       = BaseModal.get('managerOrderDetailModal');\n    let clientRules = [{\n      field: 'name',\n      rules: ['required']\n    }, {\n      field: 'address',\n      rules: ['required']\n    }, {\n      field: 'phoneNumber',\n      rules: ['required', 'phone']\n    }];\n\n    let orderRules = [{\n      field: 'dishes',\n      rules: ['required']\n    }];\n\n    // Модалка работает в двух \"режимах\", создание нового заказа - пустая\n    // и редактирование существующего заказа\n    vm.createEnabled = modal.scope.createEnabled;\n\n    if (vm.createEnabled) {\n      let orderFrame = {\n        client: {\n          address: '',\n          name: '',\n          phoneNumber: ''\n        },\n        dishes: [],\n        status: 'FRESH'\n      };\n\n      vm.order = orderFrame;\n    } else {\n      vm.order = modal.scope.order;\n    }\n\n    vm.closeMessage     = '';\n    vm.showCloseMessage = (vm.closeMessage) ? true : false;\n    vm.closeBtnMessage  = (vm.closeMessage) ? 'відмінити' : 'відміна замовлення';\n    vm.orderInfo        = helpers.calculateOrderInfo(vm.order);\n    vm.orderValid       = true;\n\n    // добаление новых дишов, показ истории заказов клиента\n    vm.selectDishesModal  = showSelectModal;\n    vm.historyOrdersModal = showHistoryModal;\n    // ред заказа\n    vm.incQuantity        = incQuantity;\n    vm.decQuantity        = decQuantity;\n    vm.removeDish         = removeDish;\n    // доп. модалки\n    vm.showCloseOrderForm = showCloseOrderForm;\n    vm.hideCloseOrderForm = hideCloseOrderForm;\n    // сохранение изменений (передача заказа на кухню)\n    vm.saveOrder          = saveOrder;\n    vm.convertHHmm        = convertHHmm;\n\n    ////////////////\n\n    /**\n     * Увеличение кол-во блюда\n     * @param {Object} dish\n     */\n\n    function incQuantity(dish) {\n      let search = helpers.searchByKey(vm.order.dishes, {dishId: dish.dishId});\n      search.quantity++;\n    }\n\n    /**\n     * Уменьшение кол-во блюда\n     * @param {Object} dish\n     */\n\n    function decQuantity(dish) {\n      let search = helpers.searchByKey(vm.order.dishes, {dishId: dish.dishId});\n      search.quantity--;\n\n      if (!search.quantity) {\n        if (!lastDishInOrder()) {\n          // Удаляем блюдо из списка\n          vm.order.dishes.splice(vm.order.dishes.indexOf(search), 1)\n        } else {\n          search.quantity++;\n        }\n      }\n    }\n\n    /**\n     * Удаление блюда из списка\n     * @param {Object} dish\n     */\n\n    function removeDish(dish) {\n      if (!lastDishInOrder()) {\n        let search = helpers.searchByKey(vm.order.dishes, {dishId: dish.dishId});\n        vm.order.dishes.splice(vm.order.dishes.indexOf(search), 1);\n      }\n    }\n\n    // Блокировка удаление последнего блюда из состава заказа\n    function lastDishInOrder() {\n      if (!(vm.order.dishes.length - 1)) {\n        toastr.error('Замовлення не можу бути порожнім!');\n        return true;\n      }\n\n      return false;\n    }\n\n    /**\n     * Показ модального окна с ред. заказа\n     */\n\n    function showSelectModal() {\n      // что бы избавиться от two data binding\n      let copy = angular.copy(vm.order);\n\n      selectModal.scope.dishes = copy.dishes;\n      selectModal.show();\n    }\n\n    /**\n     * Показ модального окна с историей заказов\n     */\n\n    function showHistoryModal() {\n      admin.history({\n        clientPhone: vm.order.client.phoneNumber\n      }, result => {\n        historylModal.scope = {\n          orders: result,\n          hideBack: true\n        };\n\n        historylModal.show();\n      });\n    }\n\n    /**\n     * Показ формы отмены заказа\n     */\n\n    function showCloseOrderForm() {\n      if (vm.showCloseMessage == true) {\n        if (vm.closeMessage !== '') {\n          let data = {\n            id: vm.order.id,\n            message: vm.closeMessage,\n            status: 'DECLINED'\n          };\n\n          // (Call центр) отменяем на этапе уточнения заказа\n          orders.decline(data, () => {\n            toastr.success('Замовлення відмінено');\n          });\n\n          modal.emit(modal.events.decline, vm.order);\n          modal.hide();\n        } else {\n          toastr.error('Введіть причину відмови від замовлення');\n        }\n      }\n\n      vm.showCloseMessage = true;\n      vm.closeBtnMessage  = 'відмінити';\n    }\n\n    function hideCloseOrderForm() {\n      vm.showCloseMessage = false;\n      vm.closeBtnMessage  = 'відміна замовлення';\n    }\n\n    /**\n     * Сохранение заказа либо обновление либо создание нового\n     */\n\n    function saveOrder() {\n      if (vm.order.dishes.length) {\n        if (vm.createEnabled) {\n          createOrder();\n        } else {\n          updateOrder();\n        }\n      } else {\n        toastr.error('Замовлення не можу бути порожнім!');\n      }\n    }\n\n    function createOrder() {\n      vm.order.status = 'KITCHEN';\n\n      let timeToDeliver = null;\n\n      if (vm.order.timeToDeliver) {\n        let today     = helpers.getDate();\n        let hhmm      = convertHHmm(vm.order.timeToDeliver);\n        timeToDeliver = `${today.str} ${hhmm}:00`;\n      }\n\n      // Подготовака данных для отправки\n      let orderData = {\n        id: vm.order.id,\n        client: {\n          name: vm.order.client.name,\n          phone: vm.order.client.phoneNumber,\n          address: vm.order.client.address\n        },\n        dishes: vm.order.dishes,\n        timeToDeliver: timeToDeliver,\n        status: vm.order.status\n      };\n\n      modal.hide();\n\n      orders.create(orderData, order => {\n        modal.emit(modal.events.create, order);\n        toastr.success('Замовлення оформлено');\n      });\n    }\n\n    function updateOrder() {\n      vm.order.status = 'KITCHEN';\n\n      let timeToDeliver = null;\n\n      if (vm.order.timeToDeliver) {\n        let today     = helpers.getDate();\n        let hhmm      = convertHHmm(vm.order.timeToDeliver);\n        timeToDeliver = `${today.str} ${hhmm}:00`;\n      }\n\n      // Подготовака данных для отправки\n      let orderData = {\n        id: vm.order.id,\n        client: {\n          name: vm.order.client.name,\n          phone: vm.order.client.phoneNumber,\n          address: vm.order.client.address\n        },\n        dishes: vm.order.dishes,\n        timeToDeliver: timeToDeliver,\n        status: vm.order.status\n      };\n\n      modal.emit(modal.events.update, vm.order);\n      modal.hide();\n\n      orders.update(orderData, () => {\n        toastr.success('Замовлення оформлено');\n      });\n    }\n\n    /**\n     * Простая проверка на заполнение полей заказа\n     * @param {Object }order\n     * @returns {boolean}\n     */\n\n    function validateOrder(order) {\n      let result = false;\n\n      let clientReport = validator.run(order.client, clientRules);\n      let orderReport  = validator.run(order, orderRules);\n\n      if (!(clientReport.errors.length) && !(orderReport.errors.length)) {\n        result = true;\n      }\n\n      return result;\n    }\n\n    /**\n     * Представление строки вида 2359 в 23:59\n     * @param str\n     * @returns {string}\n     */\n\n    function convertHHmm(str) {\n      if (str) {\n        let foo = helpers.getHourMinutes(str);\n        if (foo) {\n          return `${foo.hours}:${foo.minutes}`;\n        }\n      }\n    }\n\n    /**\n     * Обновление orderInfo\n     */\n\n    $scope.$watch(function() {\n      return vm.order.dishes;\n    }, function() {\n      vm.orderInfo = helpers.calculateOrderInfo(vm.order);\n    }, true);\n\n    /**\n     * Валидация заказа\n     */\n\n    $scope.$watch(function() {\n      return vm.order;\n    }, function(newValue) {\n      if (validateOrder(newValue)) {\n        vm.orderValid = true;\n      } else {\n        vm.orderValid = false;\n      }\n    }, true);\n\n\n    /**\n     * Выбранны новые блюда\n     */\n\n    selectModal.on(selectModal.events.selected, dishes => {\n      vm.order.dishes = dishes;\n    });\n  }\n})();\n\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals')\n    .factory('orderHistoryModal', orderHistory)\n    .controller('orderHistoryModalCtrl', orderHistoryCtrl);\n\n  orderHistory.$inject = [\n    'ngDialog',\n    'BaseModal'\n  ];\n\n  /* @ngInject */\n  function orderHistory(\n    ngDialog,\n    BaseModal\n  ) {\n\n    let modal   = new BaseModal('orderHistoryModal');\n    let service = angular.extend(modal, {\n      show: showModal,\n      hide: hideModal\n    });\n\n    return service;\n\n    ////////////////\n\n    function showModal() {\n      ngDialog.open({\n        template: 'html/modals/history/history.html',\n        showClose: false,\n        appendClassName: BaseModal.getClassName() + ' orders-history',\n        controller: 'orderHistoryModalCtrl',\n        controllerAs: 'vm'\n      });\n    }\n\n    function hideModal() {\n      ngDialog.close();\n    }\n  }\n\n  orderHistoryCtrl.$inject = [\n    'BaseModal',\n    'orderHistoryIntervalModal'\n  ];\n\n  function orderHistoryCtrl(\n    BaseModal,\n    intervalModal\n  ) {\n    let vm    = this;\n    let modal = BaseModal.get('orderHistoryModal');\n\n    vm.orders            = addShowDetailProperty(modal.scope.orders);\n    vm.hideBack          = modal.scope.hideBack;\n    vm.showIntervalModal = showIntervalModal;\n    vm.toggleOrderDetail = toggleOrderDetail;\n\n    ////////////////\n\n    function showIntervalModal() {\n      modal.hide();\n      intervalModal.show();\n    }\n\n    function addShowDetailProperty(orders) {\n      return orders.map(order => {\n        return angular.extend(order, {\n          showDetail: false\n        });\n      });\n    }\n\n    function toggleOrderDetail(order) {\n      order.showDetail = !order.showDetail;\n    }\n  }\n})();\n\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.modals')\n    .factory('orderHistoryIntervalModal', orderHistoryInterval)\n    .controller('orderHistoryIntervalModalCtrl', orderHistoryIntervalCtrl);\n\n  orderHistoryInterval.$inject = [\n    'ngDialog',\n    'BaseModal'\n  ];\n\n  /* @ngInject */\n  function orderHistoryInterval(\n    ngDialog,\n    BaseModal\n  ) {\n\n    let modal   = new BaseModal('orderHistoryIntervalModal');\n    let service = angular.extend(modal, {\n      show: showModal,\n      hide: hideModal\n    });\n\n    return service;\n\n    ////////////////\n\n    function showModal() {\n      ngDialog.open({\n        template: 'html/modals/history/interval.html',\n        width: '30%',\n        showClose: false,\n        appendClassName: BaseModal.getClassName(),\n        controller: 'orderHistoryIntervalModalCtrl',\n        controllerAs: 'vm'\n      });\n    }\n\n    function hideModal() {\n      ngDialog.close();\n    }\n  }\n\n  orderHistoryIntervalCtrl.$inject = [\n    'admin',\n    'orderHistoryModal',\n    'BaseModal'\n  ];\n\n  function orderHistoryIntervalCtrl(\n    admin,\n    historyModal,\n    BaseModal\n  ) {\n    let vm    = this;\n    let modal = BaseModal.get('orderHistoryIntervalModal');\n\n    vm.spinner    = false;\n    vm.getOrders  = getOrders;\n    vm.form       = {\n      start: '',\n      finish: ''\n    };\n\n    ////////////////\n\n    function getOrders() {\n      vm.spinner = true;\n\n      let sendData = {\n        startDate: vm.form.start + ' 00:00:00',\n        endDate: vm.form.finish + ' 00:00:00'\n      };\n\n      admin.history(sendData, result => {\n        vm.spinner         = false;\n        historyModal.scope = {\n          orders: result\n        };\n\n        modal.hide();\n        historyModal.show();\n      });\n    }\n  }\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.auth')\n    .controller('Auth', Auth)\n\n  Auth.$inject = [\n    '$rootScope',\n    'user',\n    'splash',\n    'logger'\n  ];\n\n  function Auth(\n    $rootScope,\n    user,\n    splash,\n    logger\n  ) {\n    let vm  = this;\n    vm.form = {\n      username: '',\n      password: ''\n    };\n\n    vm.login = () => {\n      user.login(vm.form)\n        .then(() => {\n          let info = user.info();\n          logger.success(`Вхід здійснено успішно: ${info.sub}`);\n          splash.delay(1500);\n\n          $rootScope.defaultRedirect();\n        })\n        .finally(() => {\n          vm.form = {\n            username: '',\n            password: ''\n          };\n        });\n    }\n  }\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.auth')\n    .run(appRun);\n\n  /* @ngInject */\n  function appRun(routehelper, USER_ROLES) {\n    routehelper.configureRoutes(getRoutes(USER_ROLES));\n  }\n\n  /* @ngInject */\n  function getRoutes(USER_ROLES) {\n    return [\n      {\n        url: '/auth',\n        config: {\n          templateUrl: 'html/components/common/auth/auth.html',\n          controller: 'Auth',\n          controllerAs: 'auth',\n          data: {\n            authorities: [\n              USER_ROLES.guest\n            ]\n          }\n        }\n      }\n    ];\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.admin.dashboard')\n    .controller('DashboardAdmin', DashboardAdmin)\n\n  DashboardAdmin.$inject = [\n    'orders',\n    'APP_EVENTS',\n    '$scope',\n    '$q',\n    'admin',\n    'helpers',\n    'ngDialog'\n  ];\n\n  /* @ngInject */\n  function DashboardAdmin(\n    orders,\n    APP_EVENTS,\n    $scope,\n    $q,\n    admin,\n    helpers,\n    ngDialog\n  ) {\n    var vm = this;\n\n    vm.callCenter     = [];\n    vm.kitchen        = [];\n    vm.delivery       = [];\n    vm.ordersLoading  = true;\n    vm.showModalOrder = showModalOrder;\n\n    let selectedOrder;\n    let deliveryModal;\n    let statuses = {\n      callCenter: [\n        'FRESH',\n        'IN_PROGRESS',\n      ],\n      kitchen: [\n        'KITCHEN',\n        'COOKING',\n        'PREPARED'\n      ],\n      delivery: [\n        'DELIVERY',\n        'DONE'\n      ]\n    };\n\n    activate();\n\n    ////////////////\n\n    function activate() {\n      return orders.fetchAll({}).$promise\n        .then(orders => {\n          vm.callCenter    = filterOrdersByStatus(orders, statuses.callCenter).sort(helpers.compareById);\n          vm.kitchen       = filterOrdersByStatus(orders, statuses.kitchen).sort(helpers.compareById);\n          vm.delivery      = filterOrdersByStatus(orders, statuses.delivery).sort(helpers.compareById);\n          vm.ordersLoading = false;\n        });\n    }\n\n    /**\n     * Фильтрация всех заказов по переданным статусам\n     * @param {Array} orders\n     * @param {Array} statuses\n     * @returns {Array}\n     */\n\n    function filterOrdersByStatus(orders, statuses) {\n      let results = [];\n\n      orders.forEach((order) => {\n        if (helpers.findString(statuses, order.status)) {\n          results.push(order);\n        }\n      });\n\n      return results;\n    }\n\n    /**\n     * Модальное окно с детальной информацией о заказе\n     * @param order\n     */\n\n    function showModalOrder(order) {\n      selectedOrder = order;\n\n      if (selectedOrder.timeToDeliver) {\n        selectedOrder.timeToDeliver = helpers.parseDate(selectedOrder.timeToDeliver);\n      }\n\n      ngDialog.open({\n        template: 'html/modals/order-detail-admin.html',\n        className: 'ngdialog-theme-default order-detail',\n        controller: orderDetailModalCtrl\n      });\n    }\n\n    function calculateOrderInfo(order) {\n      let result = {\n        price: 0,\n        count: 0\n      };\n\n      for (let dish of order.dishes) {\n        result.price += dish.dish.price * dish.quantity;\n        result.count += dish.quantity;\n      }\n\n      return result;\n    }\n\n    /**\n     * Переносит заказ из колонки Кухня в Доставку, а так же сортирует\n     * @param {Object} order\n     */\n\n    function transferOrderInDelivery(order) {\n      let search = helpers.searchByKey(vm.kitchen, {id: order.id});\n\n      vm.kitchen.splice(vm.kitchen.indexOf(search), 1);\n      vm.delivery.push(order);\n      vm.delivery.sort(helpers.compareById);\n    }\n\n    /**\n     * Обновление страницы\n     */\n\n    $scope.$on(APP_EVENTS.refreshPage, () => {\n      $q.all([activate()]).then(() => {\n        $scope.$emit(APP_EVENTS.refreshPageDone);\n      });\n    });\n\n    orderDetailModalCtrl.$inject = [\n      '$scope',\n      'helpers',\n      'toastr',\n      'admin'\n    ];\n\n    /**\n     * Контроллер модального окна с деталями заказа\n     */\n\n    function orderDetailModalCtrl(\n      $scope,\n      helpers,\n      toastr,\n      admin\n    ) {\n\n      $scope.order             = selectedOrder;\n      $scope.closeMessage      = '';\n      $scope.showCloseMessage  = ($scope.closeMessage) ? true : false;\n      $scope.closeBtnMessage   = ($scope.closeMessage) ? 'відмінити' : 'відміна замовлення';\n      $scope.orderInfo         = calculateOrderInfo(selectedOrder);\n      $scope.showModalDelivery = showModalDelivery;\n      $scope.makeInCooking     = makeInCooking;\n      $scope.convertHHmm       = convertHHmm;\n\n      ////////////////\n\n      $scope.showCloseOrderForm = () => {\n        if ($scope.showCloseMessage == true) {\n          if ($scope.closeMessage !== '') {\n            let data = {\n              id: $scope.order.id,\n              status: 'CANT_PREPARE',\n              message: $scope.closeMessage\n            };\n\n            admin.declineOrder(data, () => {\n              toastr.success('Замовлення відмінено');\n            });\n\n            let search = helpers.searchByKey(vm.kitchen, {id: selectedOrder.id});\n            vm.kitchen.splice(vm.kitchen.indexOf(search), 1);\n            vm.kitchen.sort(helpers.compareById);\n\n            ngDialog.close();\n          } else {\n            toastr.error('Введіть причину відмови від замовлення');\n          }\n        }\n\n        $scope.showCloseMessage = true;\n        $scope.closeBtnMessage  = 'відмінити';\n      }\n\n      $scope.hideCloseOrderForm = () => {\n        $scope.showCloseMessage = false;\n        $scope.closeBtnMessage  = 'відміна замовлення';\n      }\n\n      /**\n       * Кнопка выдано курьеру\n       */\n\n      $scope.passOrder = () => {\n        if (selectedOrder.courierDetails) {\n          admin.passOrderToCourier({\n            id: selectedOrder.id\n          }, () => {\n            toastr.success('Замовлення видано кур’єру');\n          });\n\n          selectedOrder.status = 'DELIVERY';\n          transferOrderInDelivery(selectedOrder);\n          ngDialog.close();\n        } else {\n          toastr.warning('Необхідно назначити кур’єра на замовлення!');\n        }\n      }\n\n      /**\n       * Модальное окно с назначением курьера на заказ\n       * @param order\n       */\n\n      function showModalDelivery() {\n        deliveryModal = ngDialog.open({\n          template: 'html/modals/order-delivery-admin.html',\n          width: '350px',\n          showClose: false,\n          controller: orderDeliveryModalCtrl\n        });\n      }\n\n      function makeInCooking() {\n        selectedOrder.status = 'COOKING';\n        admin.makeInCooking({\n          id: selectedOrder.id\n        }, () => {\n          toastr.success('Замовлення відправлено на кухню');\n        });\n\n        ngDialog.close();\n      }\n\n      /**\n       * Представление строки вида 2359 в 23:59\n       * @param str\n       * @returns {string}\n       */\n\n      function convertHHmm(str) {\n        if (str) {\n          let foo = helpers.getHourMinutes(str);\n          if (foo) {\n            return `${foo.hours}:${foo.minutes}`;\n          }\n        }\n      }\n    }\n\n    /**\n     * Контроллер модального окна с выбором курьера\n     */\n\n    orderDeliveryModalCtrl.$inject = [\n      '$scope',\n      'admin',\n      'courier',\n      'toastr'\n    ];\n\n    function orderDeliveryModalCtrl(\n      $scope,\n      admin,\n      courier,\n      toastr\n    ) {\n\n      $scope.closeModal  = closeModal;\n      $scope.showForm    = showForm;\n      $scope.sendCourier = sendCourier;\n      $scope.courierList = [];\n      $scope.pageLoading = true;\n\n      $scope.formCourier = {\n        id: 0,\n        start: '',\n        finish: ''\n      };\n\n      activate();\n\n      ////////////////\n\n      function activate() {\n        courier.fetchAll({}, couriers => {\n          $scope.courierList = transformCouriers(couriers);\n          $scope.pageLoading = false;\n        });\n      }\n\n      function closeModal() {\n        deliveryModal.close();\n      }\n\n      /**\n       * Показывает форму для отправки курьера\n       * @param courier\n       */\n\n      function showForm(courier) {\n        if (courier.status === 'BUSY') {\n          toastr.warning('Кур’єр зайнятий');\n        } else {\n          hideAllFormsExceptCourier(courier);\n\n          $scope.formCourier.id = courier.id;\n          courier.showForm      = !courier.showForm;\n        }\n      }\n\n      /**\n       * Скрывает все формы у курьеров за исключением переданного курьера\n       * @param courier\n       */\n\n      function hideAllFormsExceptCourier(courier) {\n        $scope.courierList.forEach((cour) => {\n          if (cour.id !== courier.id) {\n            cour.showForm = false;\n          }\n        });\n      }\n\n      function sendCourier(courier) {\n        let today = helpers.getDate();\n\n        if (validateForm()) {\n          let todayStr = `${today.yyyy}-${today.mm}-${today.dd}`;\n          let start    = helpers.getHourMinutes($scope.formCourier.start);\n          let finish   = helpers.getHourMinutes($scope.formCourier.finish);\n\n          admin.setOrderToCourier({\n            timeToTake: `${todayStr} ${start.hours}:${start.minutes}:00`,\n            timeToDeliver: `${todayStr} ${finish.hours}:${finish.minutes}:00`,\n            id: selectedOrder.id,\n            courierId: courier.id\n          });\n\n          selectedOrder.courierDetails = courier;\n          toastr.success('Інформація передана кур’єру');\n\n          closeModal();\n        } else {\n          toastr.error('Необхідно заповнити всі поля');\n        }\n      }\n\n      /**\n       * Проверка формы на заполнение всех полей\n       * @returns {boolean}\n       */\n\n      function validateForm() {\n        let result = true;\n\n        for (let prop in $scope.formCourier) {\n          if ($scope.formCourier.hasOwnProperty(prop)) {\n            if (!$scope.formCourier[prop]) {\n              result = false;\n            }\n          }\n        }\n\n        return result;\n      }\n\n      /**\n       * Транформирование данных от сервера в более удобный вид\n       * @param couriers\n       * @returns {Array}\n       */\n\n      function transformCouriers(couriers) {\n        let online = couriers.filter(courier => {\n          if (courier.status !== 'OUT') {\n            return true;\n          }\n        });\n\n        return online.map(courier => {\n          let free       = (courier.status === 'FREE') ? true : false;\n          let statusText = (free) ? 'вільний' : 'зайнятий';\n\n          return {\n            account: courier.account,\n            id: courier.id,\n            messagingToken: courier.messagingToken,\n            status: courier.status,\n            statusText: statusText,\n            free: free,\n            showForm: false\n          };\n        });\n      }\n    }\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.admin.dashboard')\n    .run(appRun);\n\n  /* @ngInject */\n  function appRun(routehelper, USER_ROLES) {\n    routehelper.configureRoutes(getRoutes(USER_ROLES));\n  }\n\n  /* @ngInject */\n  function getRoutes(USER_ROLES) {\n    return [\n      {\n        url: '/admin/dashboard',\n        config: {\n          templateUrl: 'html/components/admin/dashboard/dashboard.html',\n          controller: 'DashboardAdmin',\n          controllerAs: 'dash',\n          data: {\n            authorities: [\n              USER_ROLES.admin\n            ]\n          }\n        }\n      }\n    ];\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.admin.panel')\n    .controller('Panel', Panel)\n\n  Panel.$inject = [\n    'dishesCreateModal',\n    'dishesEditModal',\n    'categoriesCreateModal',\n    'helpers',\n    'categories',\n    '$timeout',\n    '$q',\n    'toastr'\n  ];\n\n  function Panel(\n    dishCreateModal,\n    dishEditModal,\n    categoryModal,\n    helpers,\n    categories,\n    $timeout,\n    $q,\n    toastr\n  ) {\n    let vm = this;\n\n    dishCreateModal.scope = vm;\n\n    vm.spinner              = true;\n    vm.loadDishes           = loadDishes;\n    vm.removeDish           = removeDishFromCategory;\n    vm.removeCategory       = removeCategory;\n    vm.showModalDishAdd     = dishCreateModal.show;\n    vm.showModalCategoryAdd = categoryModal.show;\n    vm.showModalDishEdit    = showDishEditModal;\n    vm.selectedCategory;\n\n    $q.all([activate()]).then(() => {\n      hideSpinner();\n    });\n\n    ////////////\n\n    function activate() {\n      return categories.fetchAll().$promise\n        .then(categories => {\n          vm.categories = categories;\n\n          return categories[0];\n        }).then(firstCategory => {\n          return categories.fetchDishes({\n            id: firstCategory.id\n          }).$promise.then(dishes => {\n            vm.selectedCategory = firstCategory;\n            vm.dishes           = dishes;\n          });\n        });\n    }\n\n    function loadDishes(category) {\n      vm.spinner = true;\n\n      categories.fetchDishes({\n        id: category.id\n      }, dishes => {\n        vm.selectedCategory = category;\n        vm.dishes           = dishes;\n\n        console.log(dishes);\n\n        hideSpinner();\n      });\n    }\n\n    function removeCategory() {\n      let msg = `Ви справді бажаєте видалити категорію - ${vm.selectedCategory.name}?`;\n\n      if (confirm(msg)) {\n        categories.remove({\n          id: vm.selectedCategory.id\n        }, () => {\n          let search = helpers.searchByKey(vm.categories, {\n            id: vm.selectedCategory.id\n          });\n\n          vm.categories.splice(vm.categories.indexOf(search), 1);\n          vm.selectedCategory = vm.categories[0];\n          loadDishes(vm.categories[0]);\n\n          toastr.success('Категорія видалена');\n        });\n      }\n    }\n\n    function removeDishFromCategory(idDish) {\n      let msg = `Ви справді бажаєте видалити страву?`;\n\n      if (confirm(msg)) {\n        categories.removeDish({\n          id: vm.selectedCategory.id,\n          dishes: [{\n            id: idDish\n          }]\n        }, () => {\n          let search = helpers.searchByKey(vm.dishes, {\n            id: idDish\n          });\n\n          vm.dishes.splice(vm.dishes.indexOf(search), 1);\n          toastr.success('Страву видалено');\n        });\n      }\n    }\n\n    function showDishEditModal(dish) {\n      let data = angular.extend({\n        categoryId: vm.selectedCategory.id\n      }, dish);\n\n      dishEditModal.scope = data;\n      dishEditModal.show();\n    }\n\n    function hideSpinner() {\n      $timeout(() => {\n        vm.spinner = false;\n      }, 400);\n    }\n\n    /**\n     * Добавление нового блюда в модальном окне\n     */\n\n    dishCreateModal.on(dishCreateModal.events.create, () => {\n      // Reload list of dishes\n      categories.fetchDishes({\n        id: vm.selectedCategory.id\n      }, dishes => {\n        vm.dishes = dishes;\n      });\n    });\n\n    /**\n     * Изменение блюда в модальном окне\n     */\n\n    dishEditModal.on(dishEditModal.events.update, updateDish => {\n      // Reload list of dishes\n      categories.fetchDishes({\n        id: vm.selectedCategory.id\n      }, dishes => {\n        vm.dishes = dishes;\n      });\n    });\n\n    /**\n     * Создание новой категории в модальном окне\n     */\n\n    categoryModal.on(categoryModal.events.create, () => {\n      categories.fetchAll({}, (categories) => {\n        vm.categories = categories;\n      });\n    });\n  }\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.admin.panel')\n    .run(appRun);\n\n  /* @ngInject */\n  function appRun(routehelper, USER_ROLES) {\n    routehelper.configureRoutes(getRoutes(USER_ROLES));\n  }\n\n  function getRoutes(USER_ROLES) {\n    return [\n      {\n        url: '/admin/panel',\n        config: {\n          templateUrl: 'html/components/admin/panel/panel.html',\n          controller: 'Panel',\n          controllerAs: 'panel',\n          data: {\n            authorities: [\n              USER_ROLES.admin\n            ]\n          }\n        }\n      }\n    ];\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.kitchen.orders')\n    .controller('Orders', Orders)\n\n  Orders.$inject = [\n    '$timeout',\n    'kitchen',\n    'helpers',\n    'toastr',\n    'APP_EVENTS',\n    '$scope',\n    '$q'\n  ];\n\n  function Orders(\n    $timeout,\n    kitchen,\n    helpers,\n    toastr,\n    APP_EVENTS,\n    $scope,\n    $q\n  ) {\n    let vm = this;\n\n    vm.spinner           = true;\n    vm.orders            = [];\n    vm.makePrepared      = makeOrderPrepared;\n    vm.makeNotPrepared   = makeOrderNotPrepared;\n    vm.toggleDetailOrder = toggleDetailOrder;\n    vm.findToggleOrder   = findToggleOrder;\n    vm.ordersLoad        = false;\n\n    // страшный костыль, из-за того нет сокетов.\n    let toggleOrders = [];\n    let statuses     = {\n      cooking: [\n        'COOKING'\n      ],\n      prepared: [\n        'PREPARED'\n      ]\n    };\n\n    $q.all([activate()]).then(() => {\n      hideSpinner();\n    });\n\n    ////////////\n\n    function activate() {\n      return kitchen.fetchAll({}).$promise\n        .then(orders => {\n          vm.cooking  = helpers.filterOrdersByStatus(orders, statuses.cooking).sort(helpers.compareById);\n          vm.prepared = helpers.filterOrdersByStatus(orders, statuses.prepared).sort(helpers.compareById);\n\n          makeToggleObjects(vm.cooking);\n          makeToggleObjects(vm.prepared);\n\n          vm.ordersLoad = true;\n        });\n    }\n\n    function makeOrderPrepared(order) {\n      let toggleObj    = findToggleOrder(order);\n      toggleObj.toggle = false;\n\n      transferOrderInPrepared(order);\n\n      kitchen.prepared({id: order.id}, () => {\n        toastr.success('Статус замовлення змінено');\n      });\n    }\n\n    function makeOrderNotPrepared(order) {\n      let toggleObj    = findToggleOrder(order);\n      toggleObj.toggle = false;\n\n      transferOrderInCooking(order);\n\n      kitchen.notPrepared({id: order.id}, () => {\n        toastr.success('Статус замовлення змінено');\n      });\n    }\n\n    /**\n     * Переносит заказ из статуса COOKING в PREPARED а так же сортирует\n     * @param {Object} order\n     */\n\n    function transferOrderInPrepared(order) {\n      vm.cooking.splice(vm.cooking.indexOf(order), 1);\n      vm.prepared.push(order);\n      vm.prepared.sort(helpers.compareById);\n    }\n\n    /**\n     * Переносит заказ из статуса PREPARED в COOKING а так же сортирует\n     * @param {Object} order\n     */\n\n    function transferOrderInCooking(order) {\n      vm.prepared.splice(vm.prepared.indexOf(order), 1);\n      vm.cooking.push(order);\n      vm.cooking.sort(helpers.compareById);\n    }\n\n    function toggleDetailOrder(order) {\n      let toggleObj = findToggleOrder(order);\n\n      if (toggleObj) {\n        toggleObj.toggle = !toggleObj.toggle;\n      }\n    }\n\n    function hideSpinner() {\n      $timeout(() => {\n        vm.spinner = false;\n      }, 400);\n    }\n\n    function findToggleOrder(order) {\n      return helpers.searchByKey(toggleOrders, {id: order.id});\n    }\n\n    function makeToggleObjects(orders) {\n      orders.forEach(order => {\n        if (!findToggleOrder(order)) {\n          toggleOrders.push({\n            id: order.id,\n            toggle: false\n          });\n        }\n      });\n    }\n\n    /**\n     * Обновление страницы\n     */\n\n    $scope.$on(APP_EVENTS.refreshPage, () => {\n      $q.all([activate()]).then(() => {\n        $scope.$emit(APP_EVENTS.refreshPageDone);\n      });\n    });\n  }\n})();","(function() {\n  'use strict';\n\n  angular\n    .module('app.kitchen.orders')\n    .run(appRun);\n\n  /* @ngInject */\n  function appRun(routehelper, USER_ROLES) {\n    routehelper.configureRoutes(getRoutes(USER_ROLES));\n  }\n\n  /* @ngInject */\n  function getRoutes(USER_ROLES) {\n    return [\n      {\n        url: '/kitchen/orders',\n        config: {\n          templateUrl: 'html/components/kitchen/orders/orders.html',\n          controller: 'Orders',\n          controllerAs: 'kitchen',\n          data: {\n            authorities: [\n              USER_ROLES.kitchen\n            ]\n          }\n        }\n      }\n    ];\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.manager.dashboard')\n    .controller('DashboardManager', DashboardManager)\n\n  DashboardManager.$inject = [\n    'orders',\n    'APP_EVENTS',\n    '$scope',\n    '$q',\n    'helpers',\n    'managerOrderDetailModal',\n    'managerOrderDetailMiniModal'\n  ];\n\n  /* @ngInject */\n  function DashboardManager(\n    orders,\n    APP_EVENTS,\n    $scope,\n    $q,\n    helpers,\n    orderDetailModal,\n    orderDetailMiniModal\n  ) {\n    var vm = this;\n\n    vm.callCenter     = [];\n    vm.kitchen        = [];\n    vm.delivery       = [];\n    vm.ordersLoading  = true;\n    vm.showModalOrder = showModalOrder;\n    vm.makeInProgress = makeInProgress;\n\n    let selectedOrder;\n    let modalFull = true;\n    let statuses  = {\n      callCenter: [\n        'FRESH',\n        'IN_PROGRESS'\n      ],\n      kitchen: [\n        'KITCHEN',\n        'COOKING',\n        'PREPARED'\n      ],\n      delivery: [\n        'DELIVERY',\n        'DONE'\n      ]\n    };\n\n    activate();\n\n    ////////////////\n\n    function activate() {\n      return orders.fetchAll({}).$promise\n        .then(orders => {\n          vm.callCenter    = filterOrdersByStatus(orders, statuses.callCenter).sort(helpers.compareById);\n          vm.kitchen       = filterOrdersByStatus(orders, statuses.kitchen).sort(helpers.compareById);\n          vm.delivery      = filterOrdersByStatus(orders, statuses.delivery).sort(helpers.compareById);\n          vm.ordersLoading = false;\n        });\n    }\n\n    /**\n     * Фильтрация всех заказов по переданным статусам\n     * @param {Array} orders\n     * @param {Array} statuses\n     * @returns {Array}\n     */\n\n    function filterOrdersByStatus(orders, statuses) {\n      let results = [];\n\n      orders.forEach((order) => {\n        if (helpers.findString(statuses, order.status)) {\n          results.push(order);\n        }\n      });\n\n      return results;\n    }\n\n    /**\n     * Модальное окно с детальной информацией о заказе\n     * @param order\n     */\n\n    function showModalOrder(order, full) {\n      selectedOrder = transformOrderData(order);\n      modalFull     = full;\n\n      if (selectedOrder.status === 'FRESH') {\n        makeInProgress(selectedOrder);\n      }\n\n      let copy = angular.copy(selectedOrder);\n\n      if (copy.timeToDeliver) {\n        copy.timeToDeliver = helpers.parseDate(copy.timeToDeliver);\n      }\n\n      if (full) {\n        orderDetailModal.scope.createEnabled = false;\n        orderDetailModal.scope.order         = copy;\n        orderDetailModal.show();\n      } else {\n        orderDetailMiniModal.scope.order = copy;\n        orderDetailMiniModal.show();\n      }\n    }\n\n    function makeInProgress(order) {\n      order.status = 'IN_PROGRESS';\n      orders.makeInProgress({id: order.id});\n    }\n\n    /**\n     * Трансформирование данных о заказе от сервера в более удобный вид\n     */\n\n    function transformOrderData(order) {\n      order.dishes = order.dishes.map(dish => {\n        return {\n          dish: dish.dish,\n          id: dish.id,\n          dishId: dish.dish.id,\n          quantity: dish.quantity\n        };\n      });\n\n      return order;\n    }\n\n    /**\n     * Переносит заказ из колонки CALL центр в Кухню, а так же сортирует\n     * @param {Object} order\n     */\n\n    function transferOrderInKitchen(order) {\n      let search = helpers.searchByKey(vm.callCenter, {id: order.id});\n\n      vm.callCenter.splice(vm.callCenter.indexOf(search), 1);\n      vm.kitchen.push(order);\n      vm.kitchen.sort(helpers.compareById);\n    }\n\n    /**\n     * Обновление страницы\n     */\n\n    $scope.$on(APP_EVENTS.refreshPage, () => {\n      $q.all([activate()]).then(() => {\n        $scope.$emit(APP_EVENTS.refreshPageDone);\n      });\n    });\n\n    /**\n     * Оформление заказа в модальном окне\n     */\n\n    orderDetailModal.on(orderDetailModal.events.create, order => {\n      vm.kitchen.push(order);\n      vm.kitchen.sort(helpers.compareById);\n    });\n\n    /**\n     * Обновление заказа в модальном окне\n     */\n\n    orderDetailModal.on(orderDetailModal.events.update, order => {\n      transferOrderInKitchen(order);\n    });\n\n    /**\n     * Отмена заказа в модальном окне\n     */\n\n    orderDetailModal.on(orderDetailModal.events.decline, order => {\n      let search = helpers.searchByKey(vm.callCenter, {id: order.id});\n\n      vm.callCenter.splice(vm.callCenter.indexOf(search), 1);\n      vm.callCenter.sort(helpers.compareById);\n    });\n\n    /**\n     * Не удалось доставить заказ\n     */\n\n    orderDetailMiniModal.on(orderDetailMiniModal.events.decline, order => {\n      let search = helpers.searchByKey(vm.delivery, {id: order.id});\n\n      vm.delivery.splice(vm.delivery.indexOf(search), 1);\n      vm.delivery.sort(helpers.compareById);\n    });\n  }\n})();\n","(function() {\n  'use strict';\n\n  angular\n    .module('app.manager.dashboard')\n    .run(appRun);\n\n  /* @ngInject */\n  function appRun(routehelper, USER_ROLES) {\n    routehelper.configureRoutes(getRoutes(USER_ROLES));\n  }\n\n  /* @ngInject */\n  function getRoutes(USER_ROLES) {\n    return [\n      {\n        url: '/manager/dashboard',\n        config: {\n          templateUrl: 'html/components/manager/dashboard/dashboard.html',\n          controller: 'DashboardManager',\n          controllerAs: 'dash',\n          data: {\n            authorities: [\n              USER_ROLES.manager\n            ]\n          }\n        }\n      }\n    ];\n  }\n})();\n"],"sourceRoot":"/source/"}